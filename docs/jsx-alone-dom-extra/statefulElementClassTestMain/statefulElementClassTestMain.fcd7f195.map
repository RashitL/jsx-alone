{"version":3,"sources":["../../node_modules/jsx-alone-core/dist/src/util.js","../../node_modules/jsx-alone-core/dist/src/elementImpl.js","../../node_modules/jsx-alone-core/dist/src/elementClass.js","../../node_modules/jsx-alone-core/dist/src/createElement.js","../../node_modules/jsx-alone-core/dist/src/misc.js","../../node_modules/jsx-alone-core/dist/src/index.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/util.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/elementImpl.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/elementClass.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/createElement.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/misc.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/index.js","../../node_modules/jsx-alone-dom/dist/src/elementImpl.js","../../node_modules/jsx-alone-dom/dist/src/createElement.js","../../node_modules/jsx-alone-dom/dist/src/index.js","../../dist/src/createElement.js","../../dist/src/StatefulElementClass.js","../../dist/src/index.js","../../dist/src/__tests__/statefulElementClassTestRenderApp.js","../../dist/src/__tests__/statefulElementClassTestMain.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","checkThrow","r","msg","Error","array","sample","a","push","repeat","join","indent","tabSize","getPosition","string","subString","index","split","removeWhites","replaceWith","replace","trim","randomIntBetween","b","Math","floor","random","randomItem","printMs","ms","config","minutes","seconds","milliseconds","util_1","require","isJSXAloneComponent","c","render","isNode","isTextNodeLike","isElementLike","setAttribute","content","AbstractTextNodeLike","AbstractElementLike","tag","attrs","children","name","appendChild","parentElement","findDescendant","found","some","findAscendant","getAscendants","concat","getRootAscendant","getSiblings","_this","filter","findSibling","find","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","__","constructor","create","elementImpl_1","ElementClass","props","childrenAsArray","isArray","childrenElementsAsArray","firstChildElement","e","AbstractElementClass","_super","throwOnUnrecognized","debug","err","console","error","createCreateElement","impl","textNodeImpl","escapeAttributes","functionAttributes","onElementReady","onElementCreate","onElementCreated","createElement","_i","element","elementClassInstance","elementLike","_loop_1","name_1","value_1","code","toString","escaped","keys","map","__html","dangerouslySetInnerHTML","forEach","child","AbstractJSXAlone","_1","Fragment","Js","log","If","f","isNotFalsy","__export","m","jsx_alone_core_1","jsx_alone_dom_1","buildExtraConfig","rootElementLike","extraConfig","configHooks","handleAttribute","_a","el","attribute","dontAddEventListeners","functionAttributeContext","getFunctionAttributeContextObjects","initialContext","fn","bind","addEventListener","substring","toLowerCase","undefined","handleChildRender","parent","isFunctionAttributeElement","_originalElementClassInstance","_elementClassInstance","handleAfterRender","elementClassWithContainer","setContainerEl","createCreateConfig","createCreateElementConfig","ElementLikeImpl","TextNodeLikeImpl","Module","JSXAlone","StatefulElementClass","state","containerEl","setState","activePath","selection","start","end","document","activeElement","getXPathOfElement","selectionStart","selectionEnd","direction","selectionDirection","jsx","replaceChild","activeEl","getElementByXPath","focus","setSelectionRange","evaluate","nodeType","id","parentNode","sames","from","x","tagName","indexOf","path","predicate","iterateNext","n2","alert","__1","statefulElementClassTestRenderApp","body","App","people","Repeater","className","onKeyUp","currentTarget","onClick","p2","innerHTML","statefulElementClassTestRenderApp_1"],"mappings":"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,CAAC5B,mBAA5C;;AACA4E,QAAQ,CAACtF,OAAO,CAAC,QAAD,CAAR,CAAR;;AACAsF,QAAQ,CAACtF,OAAO,CAAC,QAAD,CAAR,CAAR;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;;AACA,IAAInD,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA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","file":"statefulElementClassTestMain.fcd7f195.map","sourceRoot":"../../../jsx-alone-dom-extra/src/__tests__","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction checkThrow(r, msg) {\n    if (msg === void 0) { msg = 'Throwing on undefined value'; }\n    if (!r) {\n        throw new Error(msg);\n    }\n    return r;\n}\nexports.checkThrow = checkThrow;\n// export function tryTo<F extends (...args: any[]) => any>(f: F): ReturnType<F> | undefined {\n//   try {\n//     return f()\n//   } catch (error) {\n//   }\n// }\nfunction array(n, sample) {\n    var a = [];\n    for (var i = 0; i < n; i++) {\n        a.push(typeof sample === 'undefined' ? i : sample);\n    }\n    return a;\n}\nexports.array = array;\nfunction repeat(n, s) {\n    return array(n, s).join('');\n}\nexports.repeat = repeat;\nfunction indent(i, tabSize) {\n    if (i === void 0) { i = 1; }\n    if (tabSize === void 0) { tabSize = 2; }\n    return repeat(i * tabSize, ' ');\n}\nexports.indent = indent;\nfunction getPosition(string, subString, index) {\n    return string.split(subString, index).join(subString).length;\n}\nexports.getPosition = getPosition;\nfunction removeWhites(s, replaceWith) {\n    if (replaceWith === void 0) { replaceWith = ' '; }\n    return s.replace(/\\s+/gm, replaceWith).trim();\n}\nexports.removeWhites = removeWhites;\nfunction randomIntBetween(a, b) {\n    return Math.floor(Math.random() * b) + a;\n}\nexports.randomIntBetween = randomIntBetween;\nfunction randomItem(array) {\n    return array[randomIntBetween(0, array.length)];\n}\nexports.randomItem = randomItem;\nfunction printMs(ms, config) {\n    if (config === void 0) { config = { minutes: false, seconds: true, ms: true }; }\n    config = __assign({ minutes: false, seconds: true, ms: true }, config);\n    var seconds = config.seconds && Math.floor(ms / 1000);\n    var minutes = config.minutes && seconds && Math.floor(seconds / 60);\n    var milliseconds = config.ms && Math.floor(ms % 1000 || ms);\n    return \"\" + (minutes ? minutes + \" minutes \" : '') + (seconds ? seconds + \" seconds \" : '') + (milliseconds ? milliseconds + \" ms \" : '');\n}\nexports.printMs = printMs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction isJSXAloneComponent(c) {\n    return c.prototype && c.prototype.render;\n}\nexports.isJSXAloneComponent = isJSXAloneComponent;\nfunction isNode(n) {\n    return isTextNodeLike(n) || isElementLike(n);\n}\nexports.isNode = isNode;\nfunction isElementLike(n) {\n    return n && n.setAttribute;\n}\nexports.isElementLike = isElementLike;\nfunction isTextNodeLike(n) {\n    return n && n.content && !isElementLike(n);\n}\nexports.isTextNodeLike = isTextNodeLike;\nvar AbstractTextNodeLike = /** @class */ (function () {\n    function AbstractTextNodeLike(content) {\n        this.content = content;\n    }\n    return AbstractTextNodeLike;\n}());\nexports.AbstractTextNodeLike = AbstractTextNodeLike;\nvar AbstractElementLike = /** @class */ (function () {\n    function AbstractElementLike(tag) {\n        this.tag = tag;\n        this.attrs = {};\n        this.children = [];\n    }\n    AbstractElementLike.prototype.setAttribute = function (name, value) {\n        this.attrs[name] = value;\n    };\n    AbstractElementLike.prototype.appendChild = function (c) {\n        this.children.push(c);\n        if (isElementLike(c)) {\n            c.parentElement = this;\n        }\n    };\n    AbstractElementLike.prototype.findDescendant = function (p) {\n        var found;\n        this.children.some(function (c) {\n            if (isElementLike(c)) {\n                if (p(c)) {\n                    found = c;\n                }\n                else {\n                    found = c.findDescendant(p);\n                }\n            }\n            return !!found;\n        });\n        return found;\n    };\n    AbstractElementLike.prototype.findAscendant = function (p) {\n        if (this.parentElement) {\n            if (p(this.parentElement)) {\n                return this.parentElement;\n            }\n            return this.parentElement.findAscendant(p);\n        }\n    };\n    AbstractElementLike.prototype.getAscendants = function () {\n        return this.parentElement ? this.parentElement.getAscendants().concat([this.parentElement]) : [];\n    };\n    AbstractElementLike.prototype.getRootAscendant = function () {\n        var r = this.parentElement ? this.findAscendant(function (n) { return isElementLike(n) && !n.parentElement; }) : this;\n        return util_1.checkThrow(r, 'No root ascendant found in element like tree!');\n    };\n    AbstractElementLike.prototype.getSiblings = function () {\n        var _this = this;\n        if (this.parentElement) {\n            return this.parentElement.children.filter(function (c) { return c !== _this; });\n        }\n        return [];\n    };\n    AbstractElementLike.prototype.findSibling = function (p) {\n        return this.getSiblings().find(p);\n    };\n    AbstractElementLike.prototype.find = function (p) {\n        // TODO: this should start searching in the near children, sibling and parents, and only after that look on far nodes\n        return this.getRootAscendant().findDescendant(p);\n    };\n    return AbstractElementLike;\n}());\nexports.AbstractElementLike = AbstractElementLike;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\n/**\n * A Class able to render() JSX. Similar to React.Component but only supporting properties, without state, context, ref, did/will methods, etc.\n */\nvar ElementClass = /** @class */ (function () {\n    function ElementClass(props) {\n        this.props = props;\n    }\n    ElementClass.prototype.childrenAsArray = function () {\n        return (Array.isArray(this.props.children) ? this.props.children : [this.props.children]);\n    };\n    ElementClass.prototype.childrenElementsAsArray = function () {\n        return this.childrenAsArray().filter(function (c) { return elementImpl_1.isElementLike(c); });\n    };\n    ElementClass.prototype.firstChildElement = function () {\n        return this.childrenAsArray().find(function (e) { return true; });\n    };\n    return ElementClass;\n}());\nexports.ElementClass = ElementClass;\nvar AbstractElementClass = /** @class */ (function (_super) {\n    __extends(AbstractElementClass, _super);\n    function AbstractElementClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return AbstractElementClass;\n}(ElementClass));\nexports.AbstractElementClass = AbstractElementClass;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\nvar throwOnUnrecognized = false;\nfunction debug(err) {\n    if (throwOnUnrecognized) {\n        throw err;\n    }\n    else {\n        console.error(err);\n    }\n}\nexports.debug = debug;\n// let lastElementClassInstance:JSXAloneComponent|undefined\nfunction createCreateElement(config) {\n    var impl = config.impl, textNodeImpl = config.textNodeImpl, escapeAttributes = config.escapeAttributes, functionAttributes = config.functionAttributes, onElementReady = config.onElementReady, onElementCreate = config.onElementCreated;\n    var createElement = function (tag, attrs) {\n        if (attrs === void 0) { attrs = {}; }\n        var children = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            children[_i - 2] = arguments[_i];\n        }\n        var element;\n        var elementClassInstance;\n        if (typeof tag === 'string') {\n            element = new impl(tag);\n        }\n        else {\n            if (elementImpl_1.isJSXAloneComponent(tag)) {\n                elementClassInstance =\n                    // lastElementClassInstance=\n                    new tag(__assign({}, attrs, { children: children }));\n                element = elementClassInstance.render();\n            }\n            else {\n                element = tag(__assign({}, attrs, { children: children }));\n                //TODO: expose function element context\n            }\n            attrs = {};\n        }\n        if (onElementCreate) {\n            onElementCreate({ elementLike: element, elementClassInstance: elementClassInstance });\n        }\n        var _loop_1 = function (name_1) {\n            if (name_1 && attrs.hasOwnProperty(name_1)) {\n                var value_1 = attrs[name_1];\n                if (typeof value_1 === 'boolean') {\n                    if (value_1 === true) {\n                        element.setAttribute(name_1, name_1);\n                    }\n                }\n                else if (typeof value_1 === 'function') {\n                    if (!functionAttributes || functionAttributes === 'preserve') {\n                        element.setAttribute(name_1, value_1);\n                    }\n                    else {\n                        var code = functionAttributes === 'toString-this' ? \"_this = __this__ = this; (\" + value_1.toString() + \").apply(_this, arguments)\" : value_1.toString();\n                        var escaped = escapeAttributes ? escapeAttributes(code) : code;\n                        element.setAttribute(name_1, escaped);\n                    }\n                }\n                else if (value_1 !== false && value_1 != null) {\n                    if (name_1 === 'className') {\n                        if (typeof value_1 === 'string') {\n                            element.setAttribute('class', value_1);\n                        }\n                        else if (Array.isArray(value_1) && value_1.length && typeof value_1[0] === 'string') {\n                            element.setAttribute('class', value_1.join(' '));\n                        }\n                        else {\n                            debug(\"unrecognized className value \" + typeof value_1 + \" \" + value_1);\n                        }\n                    }\n                    else {\n                        element.setAttribute(name_1, value_1.toString());\n                    }\n                }\n                else if (typeof value_1 === 'object') {\n                    if (name_1 === 'style') {\n                        element.setAttribute('style', \"\" + Object.keys(value_1)\n                            .map(function (p) { return p + \": \" + value_1[p]; })\n                            .join('; '));\n                    }\n                    else if (name_1 === 'dangerouslySetInnerHTML' && value_1 && typeof value_1.__html === 'string') {\n                        element.dangerouslySetInnerHTML(value_1.__html);\n                    }\n                    else {\n                        debug(\"unrecognized object attribute \\\"\" + name_1 + \"\\\" - the only object attribute supported is \\\"style\\\"\");\n                    }\n                }\n                else {\n                    debug(\"unrecognized attribute \\\"\" + name_1 + \"\\\" with type \" + typeof value_1);\n                }\n            }\n        };\n        // if(onElementCreate){\n        //   onElementCreate({elementLike: element, elementClassInstance})\n        // }\n        // elementClassInstance=elementClassInstance || lastElementClassInstance\n        for (var name_1 in attrs) {\n            _loop_1(name_1);\n        }\n        if (typeof tag === 'string') {\n            // don't render children for function or classes since they are responsible of render their own children\n            children\n                .filter(function (c) { return c; })\n                .forEach(function (child) {\n                if (elementImpl_1.isNode(child)) {\n                    element.appendChild(child);\n                }\n                else if (Array.isArray(child)) {\n                    child.forEach(function (c) {\n                        if (typeof c === 'string') {\n                            element.appendChild(new textNodeImpl(c));\n                        }\n                        else if (elementImpl_1.isNode(c)) {\n                            element.appendChild(c);\n                        }\n                        else {\n                            debug(\"Child is not a node or string: \" + c + \" , tag: \" + tag);\n                        }\n                    });\n                }\n                else {\n                    element.appendChild(new textNodeImpl(child));\n                }\n            });\n        }\n        if (onElementReady) {\n            onElementReady({ elementLike: element });\n        }\n        return element;\n    };\n    return createElement;\n}\nexports.createCreateElement = createCreateElement;\nexports.AbstractJSXAlone = null;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import { AbstractJSXAlone as  } from './createElement';\nvar _1 = require(\".\");\n// export type Props = { children: Children }\n// TODO: like React.Fragment\nexports.Fragment = function (props) { return _1.AbstractJSXAlone.createElement(\"span\", null, props.children); };\nfunction Js(props) {\n    var r = props.children();\n    console.log(r);\n    return r ? _1.AbstractJSXAlone.createElement(exports.Fragment, null, r) : null;\n}\nexports.Js = Js;\n/** if as statement. children need to be in a function and the function accepts a parameter which value is given condition `c` but casted to NotFalsy<C> so there's no need of type guards in the body. Example:\n```\n<If c={type}>{type =>\n  <select multiple={true}>{names[type].map(c =>\n      <option value={c.id}>{c.label}</option>)}\n  </select>\n</If>\n```\n\nNo error thrown on second line because parameter type is not falsy but keep the original type (excluding falsy values)\n\nOther example:\n\n```\nexport class ErrorComponent extends React.Component<ErrorOptions> {\n  public render() {\n    return <div>\n      <If c={this.props.error}>{error =>\n        <React.Fragment>\n          <h2>Error</h2>\n          <If c={typeof error === 'string'}>{e =>\n            <h3>{e}</h3>}\n          </If>\n          <If c={typeof error === 'object'}>{e =>\n            <React.Fragment>\n              <h5>{error!.name}</h5>\n              <p>{error!.message}</p>\n              <If c={error.stack}>{e =>\n                <ul>\n                  {e.split('\\n').map(e =>\n                    <li>{e}</li>)}\n                </ul>}\n              </If>\n            </React.Fragment>}\n          </If>\n          <If c={this.props.responseText}>{responseText =>\n            <iframe css={{ border: 0, width: '100%', height: '400px' }} srcDoc={responseText}>\n            </iframe>}\n          </If>\n        </React.Fragment>}\n      </If>\n    </div>\n  }\n}\n\n```\n*/\nfunction If(props) {\n    //TODO: issue in dom implementation, children is an array \n    var f = Array.isArray(props.children) ? props.children[0] : props.children;\n    var c = props.c, p = props.p;\n    if (isNotFalsy(c))\n        return f.apply(null, (p ? [p] : []).concat([c]));\n    else {\n        return null;\n    }\n}\nexports.If = If;\nfunction isNotFalsy(a) { return !!a; }\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./elementImpl\"));\n__export(require(\"./elementClass\"));\n__export(require(\"./createElement\"));\nvar elementImpl_1 = require(\"./elementImpl\");\nexports.AbstractTextNodeLike = elementImpl_1.AbstractTextNodeLike;\nexports.AbstractElementLike = elementImpl_1.AbstractElementLike;\n__export(require(\"./misc\"));\n__export(require(\"./util\"));\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction checkThrow(r, msg) {\n    if (msg === void 0) { msg = 'Throwing on undefined value'; }\n    if (!r) {\n        throw new Error(msg);\n    }\n    return r;\n}\nexports.checkThrow = checkThrow;\n// export function tryTo<F extends (...args: any[]) => any>(f: F): ReturnType<F> | undefined {\n//   try {\n//     return f()\n//   } catch (error) {\n//   }\n// }\nfunction array(n, sample) {\n    var a = [];\n    for (var i = 0; i < n; i++) {\n        a.push(typeof sample === 'undefined' ? i : sample);\n    }\n    return a;\n}\nexports.array = array;\nfunction repeat(n, s) {\n    return array(n, s).join('');\n}\nexports.repeat = repeat;\nfunction indent(i, tabSize) {\n    if (i === void 0) { i = 1; }\n    if (tabSize === void 0) { tabSize = 2; }\n    return repeat(i * tabSize, ' ');\n}\nexports.indent = indent;\nfunction getPosition(string, subString, index) {\n    return string.split(subString, index).join(subString).length;\n}\nexports.getPosition = getPosition;\nfunction removeWhites(s, replaceWith) {\n    if (replaceWith === void 0) { replaceWith = ' '; }\n    return s.replace(/\\s+/gm, replaceWith).trim();\n}\nexports.removeWhites = removeWhites;\nfunction randomIntBetween(a, b) {\n    return Math.floor(Math.random() * b) + a;\n}\nexports.randomIntBetween = randomIntBetween;\nfunction randomItem(array) {\n    return array[randomIntBetween(0, array.length)];\n}\nexports.randomItem = randomItem;\nfunction printMs(ms, config) {\n    if (config === void 0) { config = { minutes: false, seconds: true, ms: true }; }\n    config = __assign({ minutes: false, seconds: true, ms: true }, config);\n    var seconds = config.seconds && Math.floor(ms / 1000);\n    var minutes = config.minutes && seconds && Math.floor(seconds / 60);\n    var milliseconds = config.ms && Math.floor(ms % 1000 || ms);\n    return \"\" + (minutes ? minutes + \" minutes \" : '') + (seconds ? seconds + \" seconds \" : '') + (milliseconds ? milliseconds + \" ms \" : '');\n}\nexports.printMs = printMs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction isJSXAloneComponent(c) {\n    return c.prototype && c.prototype.render;\n}\nexports.isJSXAloneComponent = isJSXAloneComponent;\nfunction isNode(n) {\n    return isTextNodeLike(n) || isElementLike(n);\n}\nexports.isNode = isNode;\nfunction isElementLike(n) {\n    return n && n.setAttribute;\n}\nexports.isElementLike = isElementLike;\nfunction isTextNodeLike(n) {\n    return n && n.content && !isElementLike(n);\n}\nexports.isTextNodeLike = isTextNodeLike;\nvar AbstractTextNodeLike = /** @class */ (function () {\n    function AbstractTextNodeLike(content) {\n        this.content = content;\n    }\n    return AbstractTextNodeLike;\n}());\nexports.AbstractTextNodeLike = AbstractTextNodeLike;\nvar AbstractElementLike = /** @class */ (function () {\n    function AbstractElementLike(tag) {\n        this.tag = tag;\n        this.attrs = {};\n        this.children = [];\n    }\n    AbstractElementLike.prototype.setAttribute = function (name, value) {\n        this.attrs[name] = value;\n    };\n    AbstractElementLike.prototype.appendChild = function (c) {\n        this.children.push(c);\n        if (isElementLike(c)) {\n            c.parentElement = this;\n        }\n    };\n    AbstractElementLike.prototype.findDescendant = function (p) {\n        var found;\n        this.children.some(function (c) {\n            if (isElementLike(c)) {\n                if (p(c)) {\n                    found = c;\n                }\n                else {\n                    found = c.findDescendant(p);\n                }\n            }\n            return !!found;\n        });\n        return found;\n    };\n    AbstractElementLike.prototype.findAscendant = function (p) {\n        if (this.parentElement) {\n            if (p(this.parentElement)) {\n                return this.parentElement;\n            }\n            return this.parentElement.findAscendant(p);\n        }\n    };\n    AbstractElementLike.prototype.getAscendants = function () {\n        return this.parentElement ? this.parentElement.getAscendants().concat([this.parentElement]) : [];\n    };\n    AbstractElementLike.prototype.getRootAscendant = function () {\n        var r = this.parentElement ? this.findAscendant(function (n) { return isElementLike(n) && !n.parentElement; }) : this;\n        return util_1.checkThrow(r, 'No root ascendant found in element like tree!');\n    };\n    AbstractElementLike.prototype.getSiblings = function () {\n        var _this = this;\n        if (this.parentElement) {\n            return this.parentElement.children.filter(function (c) { return c !== _this; });\n        }\n        return [];\n    };\n    AbstractElementLike.prototype.findSibling = function (p) {\n        return this.getSiblings().find(p);\n    };\n    AbstractElementLike.prototype.find = function (p) {\n        // TODO: this should start searching in the near children, sibling and parents, and only after that look on far nodes\n        return this.getRootAscendant().findDescendant(p);\n    };\n    return AbstractElementLike;\n}());\nexports.AbstractElementLike = AbstractElementLike;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\n/**\n * A Class able to render() JSX. Similar to React.Component but only supporting properties, without state, context, ref, did/will methods, etc.\n */\nvar ElementClass = /** @class */ (function () {\n    function ElementClass(props) {\n        this.props = props;\n    }\n    ElementClass.prototype.childrenAsArray = function () {\n        return (Array.isArray(this.props.children) ? this.props.children : [this.props.children]);\n    };\n    ElementClass.prototype.childrenElementsAsArray = function () {\n        return this.childrenAsArray().filter(function (c) { return elementImpl_1.isElementLike(c); });\n    };\n    ElementClass.prototype.firstChildElement = function () {\n        return this.childrenAsArray().find(function (e) { return true; });\n    };\n    return ElementClass;\n}());\nexports.ElementClass = ElementClass;\nvar AbstractElementClass = /** @class */ (function (_super) {\n    __extends(AbstractElementClass, _super);\n    function AbstractElementClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return AbstractElementClass;\n}(ElementClass));\nexports.AbstractElementClass = AbstractElementClass;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\nvar throwOnUnrecognized = false;\nfunction debug(err) {\n    if (throwOnUnrecognized) {\n        throw err;\n    }\n    else {\n        console.error(err);\n    }\n}\nexports.debug = debug;\n// let lastElementClassInstance:JSXAloneComponent|undefined\nfunction createCreateElement(config) {\n    var impl = config.impl, textNodeImpl = config.textNodeImpl, escapeAttributes = config.escapeAttributes, functionAttributes = config.functionAttributes, onElementReady = config.onElementReady, onElementCreate = config.onElementCreated;\n    var createElement = function (tag, attrs) {\n        if (attrs === void 0) { attrs = {}; }\n        var children = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            children[_i - 2] = arguments[_i];\n        }\n        var element;\n        var elementClassInstance;\n        if (typeof tag === 'string') {\n            element = new impl(tag);\n        }\n        else {\n            if (elementImpl_1.isJSXAloneComponent(tag)) {\n                elementClassInstance =\n                    // lastElementClassInstance=\n                    new tag(__assign({}, attrs, { children: children }));\n                element = elementClassInstance.render();\n            }\n            else {\n                element = tag(__assign({}, attrs, { children: children }));\n                //TODO: expose function element context\n            }\n            attrs = {};\n        }\n        if (onElementCreate) {\n            onElementCreate({ elementLike: element, elementClassInstance: elementClassInstance });\n        }\n        var _loop_1 = function (name_1) {\n            if (name_1 && attrs.hasOwnProperty(name_1)) {\n                var value_1 = attrs[name_1];\n                if (typeof value_1 === 'boolean') {\n                    if (value_1 === true) {\n                        element.setAttribute(name_1, name_1);\n                    }\n                }\n                else if (typeof value_1 === 'function') {\n                    if (!functionAttributes || functionAttributes === 'preserve') {\n                        element.setAttribute(name_1, value_1);\n                    }\n                    else {\n                        var code = functionAttributes === 'toString-this' ? \"_this = __this__ = this; (\" + value_1.toString() + \").apply(_this, arguments)\" : value_1.toString();\n                        var escaped = escapeAttributes ? escapeAttributes(code) : code;\n                        element.setAttribute(name_1, escaped);\n                    }\n                }\n                else if (value_1 !== false && value_1 != null) {\n                    if (name_1 === 'className') {\n                        if (typeof value_1 === 'string') {\n                            element.setAttribute('class', value_1);\n                        }\n                        else if (Array.isArray(value_1) && value_1.length && typeof value_1[0] === 'string') {\n                            element.setAttribute('class', value_1.join(' '));\n                        }\n                        else {\n                            debug(\"unrecognized className value \" + typeof value_1 + \" \" + value_1);\n                        }\n                    }\n                    else {\n                        element.setAttribute(name_1, value_1.toString());\n                    }\n                }\n                else if (typeof value_1 === 'object') {\n                    if (name_1 === 'style') {\n                        element.setAttribute('style', \"\" + Object.keys(value_1)\n                            .map(function (p) { return p + \": \" + value_1[p]; })\n                            .join('; '));\n                    }\n                    else if (name_1 === 'dangerouslySetInnerHTML' && value_1 && typeof value_1.__html === 'string') {\n                        element.dangerouslySetInnerHTML(value_1.__html);\n                    }\n                    else {\n                        debug(\"unrecognized object attribute \\\"\" + name_1 + \"\\\" - the only object attribute supported is \\\"style\\\"\");\n                    }\n                }\n                else {\n                    debug(\"unrecognized attribute \\\"\" + name_1 + \"\\\" with type \" + typeof value_1);\n                }\n            }\n        };\n        // if(onElementCreate){\n        //   onElementCreate({elementLike: element, elementClassInstance})\n        // }\n        // elementClassInstance=elementClassInstance || lastElementClassInstance\n        for (var name_1 in attrs) {\n            _loop_1(name_1);\n        }\n        if (typeof tag === 'string') {\n            // don't render children for function or classes since they are responsible of render their own children\n            children\n                .filter(function (c) { return c; })\n                .forEach(function (child) {\n                if (elementImpl_1.isNode(child)) {\n                    element.appendChild(child);\n                }\n                else if (Array.isArray(child)) {\n                    child.forEach(function (c) {\n                        if (typeof c === 'string') {\n                            element.appendChild(new textNodeImpl(c));\n                        }\n                        else if (elementImpl_1.isNode(c)) {\n                            element.appendChild(c);\n                        }\n                        else {\n                            debug(\"Child is not a node or string: \" + c + \" , tag: \" + tag);\n                        }\n                    });\n                }\n                else {\n                    element.appendChild(new textNodeImpl(child));\n                }\n            });\n        }\n        if (onElementReady) {\n            onElementReady({ elementLike: element });\n        }\n        return element;\n    };\n    return createElement;\n}\nexports.createCreateElement = createCreateElement;\nexports.AbstractJSXAlone = null;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import { AbstractJSXAlone as  } from './createElement';\nvar _1 = require(\".\");\n// export type Props = { children: Children }\n// TODO: like React.Fragment\nexports.Fragment = function (props) { return _1.AbstractJSXAlone.createElement(\"span\", null, props.children); };\nfunction Js(props) {\n    var r = props.children();\n    console.log(r);\n    return r ? _1.AbstractJSXAlone.createElement(exports.Fragment, null, r) : null;\n}\nexports.Js = Js;\n/** if as statement. children need to be in a function and the function accepts a parameter which value is given condition `c` but casted to NotFalsy<C> so there's no need of type guards in the body. Example:\n```\n<If c={type}>{type =>\n  <select multiple={true}>{names[type].map(c =>\n      <option value={c.id}>{c.label}</option>)}\n  </select>\n</If>\n```\n\nNo error thrown on second line because parameter type is not falsy but keep the original type (excluding falsy values)\n\nOther example:\n\n```\nexport class ErrorComponent extends React.Component<ErrorOptions> {\n  public render() {\n    return <div>\n      <If c={this.props.error}>{error =>\n        <React.Fragment>\n          <h2>Error</h2>\n          <If c={typeof error === 'string'}>{e =>\n            <h3>{e}</h3>}\n          </If>\n          <If c={typeof error === 'object'}>{e =>\n            <React.Fragment>\n              <h5>{error!.name}</h5>\n              <p>{error!.message}</p>\n              <If c={error.stack}>{e =>\n                <ul>\n                  {e.split('\\n').map(e =>\n                    <li>{e}</li>)}\n                </ul>}\n              </If>\n            </React.Fragment>}\n          </If>\n          <If c={this.props.responseText}>{responseText =>\n            <iframe css={{ border: 0, width: '100%', height: '400px' }} srcDoc={responseText}>\n            </iframe>}\n          </If>\n        </React.Fragment>}\n      </If>\n    </div>\n  }\n}\n\n```\n*/\nfunction If(props) {\n    //TODO: issue in dom implementation, children is an array \n    var f = Array.isArray(props.children) ? props.children[0] : props.children;\n    var c = props.c, p = props.p;\n    if (isNotFalsy(c))\n        return f.apply(null, (p ? [p] : []).concat([c]));\n    else {\n        return null;\n    }\n}\nexports.If = If;\nfunction isNotFalsy(a) { return !!a; }\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./elementImpl\"));\n__export(require(\"./elementClass\"));\n__export(require(\"./createElement\"));\nvar elementImpl_1 = require(\"./elementImpl\");\nexports.AbstractTextNodeLike = elementImpl_1.AbstractTextNodeLike;\nexports.AbstractElementLike = elementImpl_1.AbstractElementLike;\n__export(require(\"./misc\"));\n__export(require(\"./util\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_alone_core_1 = require(\"jsx-alone-core\");\nvar ElementLikeImpl = /** @class */ (function (_super) {\n    __extends(ElementLikeImpl, _super);\n    function ElementLikeImpl() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElementLikeImpl.prototype.render = function (config) {\n        var _this = this;\n        if (config === void 0) { config = {}; }\n        var el = document.createElement(this.tag);\n        Object.keys(this.attrs).forEach(function (attribute) {\n            var value = _this.attrs[attribute];\n            if (!config.handleAttribute || !config.handleAttribute({ config: config, el: el, attribute: attribute, value: value, elementLike: _this })) {\n                if (typeof value === 'function') {\n                    el.setAttribute(attribute, value.toString());\n                }\n                else {\n                    el.setAttribute(attribute, value + '');\n                }\n            }\n        });\n        if (this._innerHtml) {\n            el.innerHTML = this._innerHtml;\n        }\n        this.children.forEach(function (c) {\n            if (!config.handleChildRender || !config.handleChildRender({ config: config, parent: el, child: c, elementLike: _this })) {\n                c.render(__assign({}, config, { parent: el }));\n            }\n        });\n        if (config.parent) {\n            config.parent.appendChild(el);\n        }\n        if (config.handleAfterRender) {\n            config.handleAfterRender({ config: config, el: el, elementLike: this });\n        }\n        return el;\n    };\n    ElementLikeImpl.prototype.dangerouslySetInnerHTML = function (s) {\n        this._innerHtml = s;\n    };\n    return ElementLikeImpl;\n}(jsx_alone_core_1.AbstractElementLike));\nexports.ElementLikeImpl = ElementLikeImpl;\n// export interface ElementLikeImplRenderConfig extends ElementLikeImplRenderConfig {\n//   parent?: HTMLElement,\n//   dontAddEventListeners?: boolean\n//   initialContext?: any\n// }\n// class AttributeHandlerElement extends ElementLikeImpl {\n//   _elementClassInstance: ElementClass | undefined\n//   _originalElementClassInstance: ElementClass | undefined\n//   render(config: ElementLikeImplRenderConfig = {}): HTMLElement | Text {\n//     // this is the context in which  function attributes of this and descendants will be evaluated. It's set up by createCreateElementConfig see below.\n//     const elementClassInstance =\n//       (this.parentElement && (this.parentElement as ElementLikeImpl)._elementClassInstance) || this._elementClassInstance\n//     const functionAttributeContext = elementClassInstance || config.initialContext\n//     if (typeof value === 'function') {\n//       if (config.dontAddEventListeners) {\n//         el.setAttribute(attribute, value.toString())\n//       } else {\n//         let fn = functionAttributeContext ? value.bind(functionAttributeContext) : value\n//         //TODO: el.removeEventListener??\n//         el.addEventListener(attribute.substring(2, attribute.length).toLowerCase(), fn)\n//         this.attrs[attribute] = undefined // forget the attribute\n//       }\n//     }\n//     // handleChildRender\n//       if (isElementLikeImpl(c) && functionAttributeContext) {\n//         c._originalElementClassInstance =c._elementClassInstance\n//         c._elementClassInstance = elementClassInstance || c._elementClassInstance\n//       }\n//       c.render({ ...config, parent: el })\n//       // .handleAfterRender\n//     const elementClassWithContainer = this._originalElementClassInstance || this._elementClassInstance\n//     if (elementClassWithContainer && elementClassWithContainer.setContainerEl) {\n//       elementClassWithContainer.setContainerEl(el)\n//     }\n//     this._elementClassInstance = undefined // forget the reference\n//     this._originalElementClassInstance = undefined // forget the reference\n//     // create create config\n//   onElementCreate({ elementLike, elementClassInstance }: { elementLike: ElementLikeImpl; elementClassInstance?: JSXAloneComponent }) {\n//     if (elementClassInstance) {\n//       elementLike._elementClassInstance = (elementClassInstance as any) as ElementClass\n//     }\n//   }\n//   }\n// }\nvar TextNodeLikeImpl = /** @class */ (function (_super) {\n    __extends(TextNodeLikeImpl, _super);\n    function TextNodeLikeImpl() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TextNodeLikeImpl.prototype.render = function (config) {\n        if (config === void 0) { config = {}; }\n        var text = document.createTextNode(this.content);\n        if (config.parent) {\n            config.parent.appendChild(text);\n        }\n        return text;\n    };\n    return TextNodeLikeImpl;\n}(jsx_alone_core_1.AbstractTextNodeLike));\nexports.TextNodeLikeImpl = TextNodeLikeImpl;\nvar ElementClass = /** @class */ (function (_super) {\n    __extends(ElementClass, _super);\n    function ElementClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /** element classes in DOM implementation will be given its container element. The default implementation just ignore this to keep it lightweight, but other implementations could overwrite this method */\n    ElementClass.prototype.setContainerEl = function (el) { };\n    return ElementClass;\n}(jsx_alone_core_1.ElementClass));\nexports.ElementClass = ElementClass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_alone_core_1 = require(\"jsx-alone-core\");\nvar elementImpl_1 = require(\"./elementImpl\");\nexports.createCreateElementConfig = {\n    impl: elementImpl_1.ElementLikeImpl,\n    textNodeImpl: elementImpl_1.TextNodeLikeImpl,\n    functionAttributes: 'preserve'\n};\nvar Module = {\n    createElement: jsx_alone_core_1.createCreateElement(exports.createCreateElementConfig),\n    render: function (el, config) {\n        if (config === void 0) { config = {}; }\n        var elementLike = el;\n        return elementLike.render({ config: config });\n    }\n};\nexports.JSXAlone = Module;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./createElement\"));\n__export(require(\"./elementImpl\"));\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_alone_core_1 = require(\"jsx-alone-core\");\nvar jsx_alone_dom_1 = require(\"jsx-alone-dom\");\nexports.ElementClass = jsx_alone_dom_1.ElementClass;\nfunction buildExtraConfig(rootElementLike, extraConfig) {\n    var configHooks = {\n        handleAttribute: function (_a) {\n            var value = _a.value, el = _a.el, attribute = _a.attribute, elementLike = _a.elementLike;\n            if (typeof value === 'function' && !extraConfig.dontAddEventListeners) {\n                var functionAttributeContext = getFunctionAttributeContextObjects(elementLike, extraConfig.initialContext).functionAttributeContext;\n                var fn = functionAttributeContext ? value.bind(functionAttributeContext) : value;\n                el.addEventListener(attribute.substring(2, attribute.length).toLowerCase(), fn);\n                elementLike.attrs[attribute] = undefined; // forget the reference\n                return true;\n            }\n            return false;\n        },\n        handleChildRender: function (config) {\n            var child = config.child, parent = config.parent, elementLike = config.elementLike;\n            if (isFunctionAttributeElement(child)) {\n                var _a = getFunctionAttributeContextObjects(elementLike, extraConfig.initialContext), functionAttributeContext = _a.functionAttributeContext, elementClassInstance = _a.elementClassInstance;\n                if (functionAttributeContext) {\n                    child._originalElementClassInstance = child._elementClassInstance;\n                    child._elementClassInstance = elementClassInstance || child._elementClassInstance;\n                }\n            }\n            child.render(__assign({}, config, configHooks, { parent: parent }));\n            return true;\n        },\n        handleAfterRender: function (_a) {\n            var el = _a.el, elementLike = _a.elementLike;\n            var elementClassWithContainer = elementLike._originalElementClassInstance || elementLike._elementClassInstance || rootElementLike._elementClassInstance;\n            if (elementClassWithContainer && elementClassWithContainer.setContainerEl) {\n                elementClassWithContainer.setContainerEl(el);\n            }\n            elementLike._elementClassInstance = undefined; // forget the reference\n            elementLike._originalElementClassInstance = undefined; // forget the reference\n            return true;\n        }\n    };\n    return configHooks;\n    function getFunctionAttributeContextObjects(elementLike, initialContext) {\n        var elementClassInstance = (elementLike.parentElement && elementLike._elementClassInstance) || rootElementLike._elementClassInstance;\n        return { functionAttributeContext: elementClassInstance || initialContext, elementClassInstance: elementClassInstance };\n    }\n}\nexports.createCreateConfig = __assign({}, jsx_alone_dom_1.createCreateElementConfig, { impl: jsx_alone_dom_1.ElementLikeImpl, textNodeImpl: jsx_alone_dom_1.TextNodeLikeImpl, functionAttributes: 'preserve', onElementCreated: function (_a) {\n        var elementLike = _a.elementLike, elementClassInstance = _a.elementClassInstance;\n        if (elementClassInstance) {\n            elementLike._elementClassInstance = elementClassInstance;\n        }\n    } });\nvar Module = {\n    createElement: jsx_alone_core_1.createCreateElement(exports.createCreateConfig),\n    render: function (el, config) {\n        if (config === void 0) { config = {}; }\n        var elementLike = el;\n        return elementLike.render(__assign({}, config, buildExtraConfig(elementLike, { initialContext: config.initialContext || this })));\n    }\n};\nexports.JSXAlone = Module;\nfunction isFunctionAttributeElement(a) {\n    return jsx_alone_core_1.isElementLike(a);\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\".\");\nvar StatefulElementClass = /** @class */ (function (_super) {\n    __extends(StatefulElementClass, _super);\n    function StatefulElementClass(p) {\n        var _this = _super.call(this, p) || this;\n        _this.state = {};\n        _this.containerEl = undefined;\n        _this.state = __assign({}, p);\n        return _this;\n    }\n    /** changes the state, clean up containerEl and renders the element again and append it to containerEl.\n     * Notice that descendant elements will be destroyed and */\n    StatefulElementClass.prototype.setState = function (s) {\n        this.state = __assign({}, this.state, s); //= { start: 0, end: 0, direction: undefined }\n        var activePath;\n        var selection = { start: 0, end: 0 };\n        if (document.activeElement) {\n            activePath = getXPathOfElement(document.activeElement);\n            selection = {\n                start: document.activeElement.selectionStart || 0,\n                end: document.activeElement.selectionEnd || 0,\n                direction: document.activeElement.selectionDirection || undefined\n            };\n        }\n        var jsx = this.render();\n        var el = _1.JSXAlone.render(jsx, { initialContext: this });\n        this.containerEl.parentElement.replaceChild(el, this.containerEl); // This should remove event listeners too. TODO: verify\n        this.containerEl = el;\n        if (activePath) {\n            var activeEl = getElementByXPath(activePath + '');\n            if (activeEl && selection) {\n                activeEl.focus();\n                if (activeEl.setSelectionRange) {\n                    activeEl.setSelectionRange(selection.start, selection.end, selection.direction);\n                }\n            }\n        }\n    };\n    /** called by ElementLike.render() */\n    StatefulElementClass.prototype.setContainerEl = function (el) {\n        this.containerEl = el;\n    };\n    return StatefulElementClass;\n}(_1.ElementClass));\nexports.StatefulElementClass = StatefulElementClass;\n//  TODO: move to misc\nfunction getXPathOfElement(el) {\n    if (typeof el == 'string') {\n        return document.evaluate(el, document, null, 0, null) + '';\n    }\n    if (!el || el.nodeType != 1) {\n        return '';\n    }\n    if (el.id)\n        return \"//*[@id='\" + el.id + \"']\";\n    if (el.parentNode) {\n        var sames = Array.from(el.parentNode.children).filter(function (x) { return x.tagName == el.tagName; });\n        return (getXPathOfElement(el.parentNode) +\n            '/' +\n            (el.tagName || '').toLowerCase() +\n            (sames.length > 1 ? '[' + (sames.indexOf(el) + 1) + ']' : ''));\n    }\n    else {\n        return undefined;\n    }\n}\n//  TODO: move to misc\nfunction getElementByXPath(path, predicate) {\n    var p = document.evaluate(path, document, null, 0, null);\n    if (!predicate) {\n        return p.iterateNext();\n    }\n    try {\n        var n = void 0;\n        var n2 = void 0;\n        while ((n = p.iterateNext()) && !predicate(n)) {\n            n2 = n;\n        }\n        return n2;\n    }\n    catch (e) {\n        alert('Error: Document tree modified during iteration ' + e);\n    }\n}\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./createElement\"));\n// export * from './ElementImpl'\n__export(require(\"./StatefulElementClass\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar __1 = require(\"..\");\nfunction statefulElementClassTestRenderApp() {\n    var parent = document.createElement('div');\n    document.body.appendChild(parent);\n    var el = __1.JSXAlone.render(__1.JSXAlone.createElement(App, { people: [{ name: 'seba' }, { name: 'lau' }] }), { parent: parent, initialContext: this });\n    parent.appendChild(el);\n    return parent;\n}\nexports.statefulElementClassTestRenderApp = statefulElementClassTestRenderApp;\nvar Repeater = /** @class */ (function (_super) {\n    __extends(Repeater, _super);\n    function Repeater(p) {\n        var _this = _super.call(this, p) || this;\n        _this.state = __assign({}, p);\n        return _this;\n    }\n    Repeater.prototype.render = function () {\n        var _this = this;\n        return (__1.JSXAlone.createElement(\"div\", { className: \"Repeater\" },\n            \"Write something:\",\n            __1.JSXAlone.createElement(\"input\", { value: this.state.value, onKeyUp: function (e) {\n                    console.log(e.currentTarget.value);\n                    _this.setState({ value: e.currentTarget.value });\n                } }),\n            __1.JSXAlone.createElement(\"br\", null),\n            \"Will be repeated: \",\n            __1.JSXAlone.createElement(\"span\", null, this.state.value),\n            ' '));\n    };\n    return Repeater;\n}(__1.StatefulElementClass));\nvar App = /** @class */ (function (_super) {\n    __extends(App, _super);\n    function App(p) {\n        var _this = _super.call(this, p) || this;\n        _this.state = __assign({}, p);\n        return _this;\n    }\n    App.prototype.render = function () {\n        var _this = this;\n        return (\n        // <Repeater value={'p.name'} />\n        __1.JSXAlone.createElement(\"div\", { className: \"App\" },\n            __1.JSXAlone.createElement(\"button\", { id: \"add\", onClick: function (e) { return _this.setState({ people: _this.state.people.concat([{ name: 'random name ' + Math.random() }]) }); } }, \"add\"),\n            __1.JSXAlone.createElement(\"ul\", null, this.state.people.map(function (p) { return (__1.JSXAlone.createElement(\"li\", { \"data-id\": p.name },\n                __1.JSXAlone.createElement(Repeater, { value: p.name }),\n                __1.JSXAlone.createElement(\"button\", { className: \"remove\", onClick: function (e) {\n                        _this.setState({ people: _this.state.people.filter(function (p2) { return p2.name !== p.name; }) });\n                    } }, \"remove\"))); }))));\n    };\n    App.prototype.setState = function (s) {\n        this.state = __assign({}, this.state, s);\n        this.containerEl.innerHTML = '';\n        this.containerEl.appendChild(__1.JSXAlone.render(this.render()));\n    };\n    return App;\n}(__1.StatefulElementClass));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar statefulElementClassTestRenderApp_1 = require(\"./statefulElementClassTestRenderApp\");\nstatefulElementClassTestRenderApp_1.statefulElementClassTestRenderApp();\n"]}