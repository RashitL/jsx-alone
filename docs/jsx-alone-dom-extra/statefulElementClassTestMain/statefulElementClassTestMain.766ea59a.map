{"version":3,"sources":["../../node_modules/jsx-alone-core/dist/src/util.js","../../node_modules/jsx-alone-core/dist/src/elementImpl.js","../../node_modules/jsx-alone-core/dist/src/elementClass.js","../../node_modules/jsx-alone-core/dist/src/createElement.js","../../node_modules/jsx-alone-core/dist/src/misc.js","../../node_modules/jsx-alone-core/dist/src/index.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/util.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/elementImpl.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/elementClass.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/createElement.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/misc.js","../../node_modules/jsx-alone-dom/node_modules/jsx-alone-core/dist/src/index.js","../../node_modules/jsx-alone-dom/dist/src/elementImpl.js","../../node_modules/jsx-alone-dom/dist/src/createElement.js","../../node_modules/jsx-alone-dom/dist/src/index.js","../../dist/src/createElement.js","../../dist/src/StatefulElementClass.js","../../dist/src/index.js","../../dist/src/__tests__/statefulElementClassTestRenderApp.js","../../dist/src/__tests__/statefulElementClassTestMain.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","checkThrow","r","msg","Error","array","sample","a","push","repeat","join","indent","tabSize","getPosition","string","subString","index","split","removeWhites","replaceWith","replace","trim","randomIntBetween","b","Math","floor","random","randomItem","printMs","ms","config","minutes","seconds","milliseconds","defineProperty","exports","value","util_1","require","isJSXAloneComponent","c","render","isNode","isTextNodeLike","isElementLike","setAttribute","content","AbstractTextNodeLike","AbstractElementLike","tag","attrs","children","name","appendChild","parentElement","findDescendant","found","some","findAscendant","getAscendants","concat","getRootAscendant","getSiblings","_this","filter","findSibling","find","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","__","constructor","create","elementImpl_1","ElementClass","props","childrenAsArray","isArray","childrenElementsAsArray","firstChildElement","e","AbstractElementClass","_super","throwOnUnrecognized","debug","err","console","error","createCreateElement","impl","textNodeImpl","escapeAttributes","functionAttributes","onElementReady","onElementCreate","onElementCreated","createElement","element","elementClassInstance","_i","elementLike","_loop_1","name_1","value_1","code","toString","escaped","keys","map","__html","dangerouslySetInnerHTML","forEach","child","AbstractJSXAlone","_1","Js","log","Fragment","If","f","isNotFalsy","__export","m","jsx_alone_core_1","jsx_alone_dom_1","buildExtraConfig","rootElementLike","extraConfig","configHooks","handleAttribute","_a","el","attribute","dontAddEventListeners","functionAttributeContext","getFunctionAttributeContextObjects","initialContext","fn","bind","addEventListener","substring","toLowerCase","undefined","handleChildRender","parent","isFunctionAttributeElement","_originalElementClassInstance","_elementClassInstance","handleAfterRender","elementClassWithContainer","setContainerEl","createCreateConfig","createCreateElementConfig","ElementLikeImpl","TextNodeLikeImpl","Module","JSXAlone","StatefulElementClass","state","containerEl","setState","activePath","selection","start","end","document","activeElement","getXPathOfElement","selectionStart","selectionEnd","direction","selectionDirection","jsx","replaceChild","activeEl","getElementByXPath","focus","setSelectionRange","evaluate","nodeType","id","parentNode","sames","from","x","tagName","indexOf","path","predicate","iterateNext","n2","alert","__1","statefulElementClassTestRenderApp","body","App","people","Repeater","className","onKeyUp","currentTarget","onClick","p2","statefulElementClassTestRenderApp_1"],"mappings":"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","file":"statefulElementClassTestMain.766ea59a.map","sourceRoot":"../../../jsx-alone-dom-extra/src/__tests__","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction checkThrow(r, msg) {\n    if (msg === void 0) { msg = 'Throwing on undefined value'; }\n    if (!r) {\n        throw new Error(msg);\n    }\n    return r;\n}\nexports.checkThrow = checkThrow;\n// export function tryTo<F extends (...args: any[]) => any>(f: F): ReturnType<F> | undefined {\n//   try {\n//     return f()\n//   } catch (error) {\n//   }\n// }\nfunction array(n, sample) {\n    var a = [];\n    for (var i = 0; i < n; i++) {\n        a.push(typeof sample === 'undefined' ? i : sample);\n    }\n    return a;\n}\nexports.array = array;\nfunction repeat(n, s) {\n    return array(n, s).join('');\n}\nexports.repeat = repeat;\nfunction indent(i, tabSize) {\n    if (i === void 0) { i = 1; }\n    if (tabSize === void 0) { tabSize = 2; }\n    return repeat(i * tabSize, ' ');\n}\nexports.indent = indent;\nfunction getPosition(string, subString, index) {\n    return string.split(subString, index).join(subString).length;\n}\nexports.getPosition = getPosition;\nfunction removeWhites(s, replaceWith) {\n    if (replaceWith === void 0) { replaceWith = ' '; }\n    return s.replace(/\\s+/gm, replaceWith).trim();\n}\nexports.removeWhites = removeWhites;\nfunction randomIntBetween(a, b) {\n    return Math.floor(Math.random() * b) + a;\n}\nexports.randomIntBetween = randomIntBetween;\nfunction randomItem(array) {\n    return array[randomIntBetween(0, array.length)];\n}\nexports.randomItem = randomItem;\nfunction printMs(ms, config) {\n    if (config === void 0) { config = { minutes: false, seconds: true, ms: true }; }\n    config = __assign({ minutes: false, seconds: true, ms: true }, config);\n    var seconds = config.seconds && Math.floor(ms / 1000);\n    var minutes = config.minutes && seconds && Math.floor(seconds / 60);\n    var milliseconds = config.ms && Math.floor(ms % 1000 || ms);\n    return \"\" + (minutes ? minutes + \" minutes \" : '') + (seconds ? seconds + \" seconds \" : '') + (milliseconds ? milliseconds + \" ms \" : '');\n}\nexports.printMs = printMs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction isJSXAloneComponent(c) {\n    return c.prototype && c.prototype.render;\n}\nexports.isJSXAloneComponent = isJSXAloneComponent;\nfunction isNode(n) {\n    return isTextNodeLike(n) || isElementLike(n);\n}\nexports.isNode = isNode;\nfunction isElementLike(n) {\n    return n && n.setAttribute;\n}\nexports.isElementLike = isElementLike;\nfunction isTextNodeLike(n) {\n    return n && n.content && !isElementLike(n);\n}\nexports.isTextNodeLike = isTextNodeLike;\nvar AbstractTextNodeLike = /** @class */ (function () {\n    function AbstractTextNodeLike(content) {\n        this.content = content;\n    }\n    return AbstractTextNodeLike;\n}());\nexports.AbstractTextNodeLike = AbstractTextNodeLike;\nvar AbstractElementLike = /** @class */ (function () {\n    function AbstractElementLike(tag) {\n        this.tag = tag;\n        this.attrs = {};\n        this.children = [];\n    }\n    AbstractElementLike.prototype.setAttribute = function (name, value) {\n        this.attrs[name] = value;\n    };\n    AbstractElementLike.prototype.appendChild = function (c) {\n        this.children.push(c);\n        if (isElementLike(c)) {\n            c.parentElement = this;\n        }\n    };\n    AbstractElementLike.prototype.findDescendant = function (p) {\n        var found;\n        this.children.some(function (c) {\n            if (isElementLike(c)) {\n                if (p(c)) {\n                    found = c;\n                }\n                else {\n                    found = c.findDescendant(p);\n                }\n            }\n            return !!found;\n        });\n        return found;\n    };\n    AbstractElementLike.prototype.findAscendant = function (p) {\n        if (this.parentElement) {\n            if (p(this.parentElement)) {\n                return this.parentElement;\n            }\n            return this.parentElement.findAscendant(p);\n        }\n    };\n    AbstractElementLike.prototype.getAscendants = function () {\n        return this.parentElement ? this.parentElement.getAscendants().concat([this.parentElement]) : [];\n    };\n    AbstractElementLike.prototype.getRootAscendant = function () {\n        var r = this.parentElement ? this.findAscendant(function (n) { return isElementLike(n) && !n.parentElement; }) : this;\n        return util_1.checkThrow(r, 'No root ascendant found in element like tree!');\n    };\n    AbstractElementLike.prototype.getSiblings = function () {\n        var _this = this;\n        if (this.parentElement) {\n            return this.parentElement.children.filter(function (c) { return c !== _this; });\n        }\n        return [];\n    };\n    AbstractElementLike.prototype.findSibling = function (p) {\n        return this.getSiblings().find(p);\n    };\n    AbstractElementLike.prototype.find = function (p) {\n        // TODO: this should start searching in the near children, sibling and parents, and only after that look on far nodes\n        return this.getRootAscendant().findDescendant(p);\n    };\n    return AbstractElementLike;\n}());\nexports.AbstractElementLike = AbstractElementLike;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\n/**\n * A Class able to render() JSX. Similar to React.Component but only supporting properties, without state, context, ref, did/will methods, etc.\n */\nvar ElementClass = /** @class */ (function () {\n    function ElementClass(props) {\n        this.props = props;\n    }\n    ElementClass.prototype.childrenAsArray = function () {\n        return (Array.isArray(this.props.children) ? this.props.children : [this.props.children]);\n    };\n    ElementClass.prototype.childrenElementsAsArray = function () {\n        return this.childrenAsArray().filter(function (c) { return elementImpl_1.isElementLike(c); });\n    };\n    ElementClass.prototype.firstChildElement = function () {\n        return this.childrenAsArray().find(function (e) { return true; });\n    };\n    return ElementClass;\n}());\nexports.ElementClass = ElementClass;\nvar AbstractElementClass = /** @class */ (function (_super) {\n    __extends(AbstractElementClass, _super);\n    function AbstractElementClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return AbstractElementClass;\n}(ElementClass));\nexports.AbstractElementClass = AbstractElementClass;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\nvar throwOnUnrecognized = false;\nfunction debug(err) {\n    if (throwOnUnrecognized) {\n        throw err;\n    }\n    else {\n        console.error(err);\n    }\n}\nexports.debug = debug;\n// let lastElementClassInstance:JSXAloneComponent|undefined\nfunction createCreateElement(config) {\n    var impl = config.impl, textNodeImpl = config.textNodeImpl, escapeAttributes = config.escapeAttributes, functionAttributes = config.functionAttributes, onElementReady = config.onElementReady, onElementCreate = config.onElementCreated;\n    var createElement = function (tag, attrs) {\n        if (attrs === void 0) { attrs = {}; }\n        var children = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            children[_i - 2] = arguments[_i];\n        }\n        var element;\n        var elementClassInstance;\n        if (typeof tag === 'string') {\n            element = new impl(tag);\n        }\n        else {\n            if (elementImpl_1.isJSXAloneComponent(tag)) {\n                elementClassInstance =\n                    // lastElementClassInstance=\n                    new tag(__assign({}, attrs, { children: children }));\n                element = elementClassInstance.render();\n            }\n            else {\n                element = tag(__assign({}, attrs, { children: children }));\n                //TODO: expose function element context\n            }\n            attrs = {};\n        }\n        if (onElementCreate) {\n            onElementCreate({ elementLike: element, elementClassInstance: elementClassInstance });\n        }\n        var _loop_1 = function (name_1) {\n            if (name_1 && attrs.hasOwnProperty(name_1)) {\n                var value_1 = attrs[name_1];\n                if (typeof value_1 === 'boolean') {\n                    if (value_1 === true) {\n                        element.setAttribute(name_1, name_1);\n                    }\n                }\n                else if (typeof value_1 === 'function') {\n                    if (!functionAttributes || functionAttributes === 'preserve') {\n                        element.setAttribute(name_1, value_1);\n                    }\n                    else {\n                        var code = functionAttributes === 'toString-this' ? \"_this = __this__ = this; (\" + value_1.toString() + \").apply(_this, arguments)\" : value_1.toString();\n                        var escaped = escapeAttributes ? escapeAttributes(code) : code;\n                        element.setAttribute(name_1, escaped);\n                    }\n                }\n                else if (value_1 !== false && value_1 != null) {\n                    if (name_1 === 'className') {\n                        if (typeof value_1 === 'string') {\n                            element.setAttribute('class', value_1);\n                        }\n                        else if (Array.isArray(value_1) && value_1.length && typeof value_1[0] === 'string') {\n                            element.setAttribute('class', value_1.join(' '));\n                        }\n                        else {\n                            debug(\"unrecognized className value \" + typeof value_1 + \" \" + value_1);\n                        }\n                    }\n                    else {\n                        element.setAttribute(name_1, value_1.toString());\n                    }\n                }\n                else if (typeof value_1 === 'object') {\n                    if (name_1 === 'style') {\n                        element.setAttribute('style', \"\" + Object.keys(value_1)\n                            .map(function (p) { return p + \": \" + value_1[p]; })\n                            .join('; '));\n                    }\n                    else if (name_1 === 'dangerouslySetInnerHTML' && value_1 && typeof value_1.__html === 'string') {\n                        element.dangerouslySetInnerHTML(value_1.__html);\n                    }\n                    else {\n                        debug(\"unrecognized object attribute \\\"\" + name_1 + \"\\\" - the only object attribute supported is \\\"style\\\"\");\n                    }\n                }\n                else {\n                    debug(\"unrecognized attribute \\\"\" + name_1 + \"\\\" with type \" + typeof value_1);\n                }\n            }\n        };\n        // if(onElementCreate){\n        //   onElementCreate({elementLike: element, elementClassInstance})\n        // }\n        // elementClassInstance=elementClassInstance || lastElementClassInstance\n        for (var name_1 in attrs) {\n            _loop_1(name_1);\n        }\n        if (typeof tag === 'string') {\n            // don't render children for function or classes since they are responsible of render their own children\n            children\n                .filter(function (c) { return c; })\n                .forEach(function (child) {\n                if (elementImpl_1.isNode(child)) {\n                    element.appendChild(child);\n                }\n                else if (Array.isArray(child)) {\n                    child.forEach(function (c) {\n                        if (typeof c === 'string') {\n                            element.appendChild(new textNodeImpl(c));\n                        }\n                        else if (elementImpl_1.isNode(c)) {\n                            element.appendChild(c);\n                        }\n                        else {\n                            debug(\"Child is not a node or string: \" + c + \" , tag: \" + tag);\n                        }\n                    });\n                }\n                else {\n                    element.appendChild(new textNodeImpl(child));\n                }\n            });\n        }\n        if (onElementReady) {\n            onElementReady({ elementLike: element });\n        }\n        return element;\n    };\n    return createElement;\n}\nexports.createCreateElement = createCreateElement;\nexports.AbstractJSXAlone = null;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import { AbstractJSXAlone as  } from './createElement';\nvar _1 = require(\".\");\n// export type Props = { children: Children }\n// TODO: like React.Fragment\nexports.Fragment = function (props) { return _1.AbstractJSXAlone.createElement(\"span\", null, props.children); };\nfunction Js(props) {\n    var r = props.children();\n    console.log(r);\n    return r ? _1.AbstractJSXAlone.createElement(exports.Fragment, null, r) : null;\n}\nexports.Js = Js;\n/** if as statement. children need to be in a function and the function accepts a parameter which value is given condition `c` but casted to NotFalsy<C> so there's no need of type guards in the body. Example:\n```\n<If c={type}>{type =>\n  <select multiple={true}>{names[type].map(c =>\n      <option value={c.id}>{c.label}</option>)}\n  </select>\n</If>\n```\n\nNo error thrown on second line because parameter type is not falsy but keep the original type (excluding falsy values)\n\nOther example:\n\n```\nexport class ErrorComponent extends React.Component<ErrorOptions> {\n  public render() {\n    return <div>\n      <If c={this.props.error}>{error =>\n        <React.Fragment>\n          <h2>Error</h2>\n          <If c={typeof error === 'string'}>{e =>\n            <h3>{e}</h3>}\n          </If>\n          <If c={typeof error === 'object'}>{e =>\n            <React.Fragment>\n              <h5>{error!.name}</h5>\n              <p>{error!.message}</p>\n              <If c={error.stack}>{e =>\n                <ul>\n                  {e.split('\\n').map(e =>\n                    <li>{e}</li>)}\n                </ul>}\n              </If>\n            </React.Fragment>}\n          </If>\n          <If c={this.props.responseText}>{responseText =>\n            <iframe css={{ border: 0, width: '100%', height: '400px' }} srcDoc={responseText}>\n            </iframe>}\n          </If>\n        </React.Fragment>}\n      </If>\n    </div>\n  }\n}\n\n```\n*/\nfunction If(props) {\n    //TODO: issue in dom implementation, children is an array \n    var f = Array.isArray(props.children) ? props.children[0] : props.children;\n    var c = props.c, p = props.p;\n    if (isNotFalsy(c))\n        return f.apply(null, (p ? [p] : []).concat([c]));\n    else {\n        return null;\n    }\n}\nexports.If = If;\nfunction isNotFalsy(a) { return !!a; }\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./elementImpl\"));\n__export(require(\"./elementClass\"));\n__export(require(\"./createElement\"));\nvar elementImpl_1 = require(\"./elementImpl\");\nexports.AbstractTextNodeLike = elementImpl_1.AbstractTextNodeLike;\nexports.AbstractElementLike = elementImpl_1.AbstractElementLike;\n__export(require(\"./misc\"));\n__export(require(\"./util\"));\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction checkThrow(r, msg) {\n    if (msg === void 0) { msg = 'Throwing on undefined value'; }\n    if (!r) {\n        throw new Error(msg);\n    }\n    return r;\n}\nexports.checkThrow = checkThrow;\n// export function tryTo<F extends (...args: any[]) => any>(f: F): ReturnType<F> | undefined {\n//   try {\n//     return f()\n//   } catch (error) {\n//   }\n// }\nfunction array(n, sample) {\n    var a = [];\n    for (var i = 0; i < n; i++) {\n        a.push(typeof sample === 'undefined' ? i : sample);\n    }\n    return a;\n}\nexports.array = array;\nfunction repeat(n, s) {\n    return array(n, s).join('');\n}\nexports.repeat = repeat;\nfunction indent(i, tabSize) {\n    if (i === void 0) { i = 1; }\n    if (tabSize === void 0) { tabSize = 2; }\n    return repeat(i * tabSize, ' ');\n}\nexports.indent = indent;\nfunction getPosition(string, subString, index) {\n    return string.split(subString, index).join(subString).length;\n}\nexports.getPosition = getPosition;\nfunction removeWhites(s, replaceWith) {\n    if (replaceWith === void 0) { replaceWith = ' '; }\n    return s.replace(/\\s+/gm, replaceWith).trim();\n}\nexports.removeWhites = removeWhites;\nfunction randomIntBetween(a, b) {\n    return Math.floor(Math.random() * b) + a;\n}\nexports.randomIntBetween = randomIntBetween;\nfunction randomItem(array) {\n    return array[randomIntBetween(0, array.length)];\n}\nexports.randomItem = randomItem;\nfunction printMs(ms, config) {\n    if (config === void 0) { config = { minutes: false, seconds: true, ms: true }; }\n    config = __assign({ minutes: false, seconds: true, ms: true }, config);\n    var seconds = config.seconds && Math.floor(ms / 1000);\n    var minutes = config.minutes && seconds && Math.floor(seconds / 60);\n    var milliseconds = config.ms && Math.floor(ms % 1000 || ms);\n    return \"\" + (minutes ? minutes + \" minutes \" : '') + (seconds ? seconds + \" seconds \" : '') + (milliseconds ? milliseconds + \" ms \" : '');\n}\nexports.printMs = printMs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction isJSXAloneComponent(c) {\n    return c.prototype && c.prototype.render;\n}\nexports.isJSXAloneComponent = isJSXAloneComponent;\nfunction isNode(n) {\n    return isTextNodeLike(n) || isElementLike(n);\n}\nexports.isNode = isNode;\nfunction isElementLike(n) {\n    return n && n.setAttribute;\n}\nexports.isElementLike = isElementLike;\nfunction isTextNodeLike(n) {\n    return n && n.content && !isElementLike(n);\n}\nexports.isTextNodeLike = isTextNodeLike;\nvar AbstractTextNodeLike = /** @class */ (function () {\n    function AbstractTextNodeLike(content) {\n        this.content = content;\n    }\n    return AbstractTextNodeLike;\n}());\nexports.AbstractTextNodeLike = AbstractTextNodeLike;\nvar AbstractElementLike = /** @class */ (function () {\n    function AbstractElementLike(tag) {\n        this.tag = tag;\n        this.attrs = {};\n        this.children = [];\n    }\n    AbstractElementLike.prototype.setAttribute = function (name, value) {\n        this.attrs[name] = value;\n    };\n    AbstractElementLike.prototype.appendChild = function (c) {\n        this.children.push(c);\n        if (isElementLike(c)) {\n            c.parentElement = this;\n        }\n    };\n    AbstractElementLike.prototype.findDescendant = function (p) {\n        var found;\n        this.children.some(function (c) {\n            if (isElementLike(c)) {\n                if (p(c)) {\n                    found = c;\n                }\n                else {\n                    found = c.findDescendant(p);\n                }\n            }\n            return !!found;\n        });\n        return found;\n    };\n    AbstractElementLike.prototype.findAscendant = function (p) {\n        if (this.parentElement) {\n            if (p(this.parentElement)) {\n                return this.parentElement;\n            }\n            return this.parentElement.findAscendant(p);\n        }\n    };\n    AbstractElementLike.prototype.getAscendants = function () {\n        return this.parentElement ? this.parentElement.getAscendants().concat([this.parentElement]) : [];\n    };\n    AbstractElementLike.prototype.getRootAscendant = function () {\n        var r = this.parentElement ? this.findAscendant(function (n) { return isElementLike(n) && !n.parentElement; }) : this;\n        return util_1.checkThrow(r, 'No root ascendant found in element like tree!');\n    };\n    AbstractElementLike.prototype.getSiblings = function () {\n        var _this = this;\n        if (this.parentElement) {\n            return this.parentElement.children.filter(function (c) { return c !== _this; });\n        }\n        return [];\n    };\n    AbstractElementLike.prototype.findSibling = function (p) {\n        return this.getSiblings().find(p);\n    };\n    AbstractElementLike.prototype.find = function (p) {\n        // TODO: this should start searching in the near children, sibling and parents, and only after that look on far nodes\n        return this.getRootAscendant().findDescendant(p);\n    };\n    return AbstractElementLike;\n}());\nexports.AbstractElementLike = AbstractElementLike;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\n/**\n * A Class able to render() JSX. Similar to React.Component but only supporting properties, without state, context, ref, did/will methods, etc.\n */\nvar ElementClass = /** @class */ (function () {\n    function ElementClass(props) {\n        this.props = props;\n    }\n    ElementClass.prototype.childrenAsArray = function () {\n        return (Array.isArray(this.props.children) ? this.props.children : [this.props.children]);\n    };\n    ElementClass.prototype.childrenElementsAsArray = function () {\n        return this.childrenAsArray().filter(function (c) { return elementImpl_1.isElementLike(c); });\n    };\n    ElementClass.prototype.firstChildElement = function () {\n        return this.childrenAsArray().find(function (e) { return true; });\n    };\n    return ElementClass;\n}());\nexports.ElementClass = ElementClass;\nvar AbstractElementClass = /** @class */ (function (_super) {\n    __extends(AbstractElementClass, _super);\n    function AbstractElementClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return AbstractElementClass;\n}(ElementClass));\nexports.AbstractElementClass = AbstractElementClass;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elementImpl_1 = require(\"./elementImpl\");\nvar throwOnUnrecognized = false;\nfunction debug(err) {\n    if (throwOnUnrecognized) {\n        throw err;\n    }\n    else {\n        console.error(err);\n    }\n}\nexports.debug = debug;\n// let lastElementClassInstance:JSXAloneComponent|undefined\nfunction createCreateElement(config) {\n    var impl = config.impl, textNodeImpl = config.textNodeImpl, escapeAttributes = config.escapeAttributes, functionAttributes = config.functionAttributes, onElementReady = config.onElementReady, onElementCreate = config.onElementCreated;\n    var createElement = function (tag, attrs) {\n        if (attrs === void 0) { attrs = {}; }\n        var children = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            children[_i - 2] = arguments[_i];\n        }\n        var element;\n        var elementClassInstance;\n        if (typeof tag === 'string') {\n            element = new impl(tag);\n        }\n        else {\n            if (elementImpl_1.isJSXAloneComponent(tag)) {\n                elementClassInstance =\n                    // lastElementClassInstance=\n                    new tag(__assign({}, attrs, { children: children }));\n                element = elementClassInstance.render();\n            }\n            else {\n                element = tag(__assign({}, attrs, { children: children }));\n                //TODO: expose function element context\n            }\n            attrs = {};\n        }\n        if (onElementCreate) {\n            onElementCreate({ elementLike: element, elementClassInstance: elementClassInstance });\n        }\n        var _loop_1 = function (name_1) {\n            if (name_1 && attrs.hasOwnProperty(name_1)) {\n                var value_1 = attrs[name_1];\n                if (typeof value_1 === 'boolean') {\n                    if (value_1 === true) {\n                        element.setAttribute(name_1, name_1);\n                    }\n                }\n                else if (typeof value_1 === 'function') {\n                    if (!functionAttributes || functionAttributes === 'preserve') {\n                        element.setAttribute(name_1, value_1);\n                    }\n                    else {\n                        var code = functionAttributes === 'toString-this' ? \"_this = __this__ = this; (\" + value_1.toString() + \").apply(_this, arguments)\" : value_1.toString();\n                        var escaped = escapeAttributes ? escapeAttributes(code) : code;\n                        element.setAttribute(name_1, escaped);\n                    }\n                }\n                else if (value_1 !== false && value_1 != null) {\n                    if (name_1 === 'className') {\n                        if (typeof value_1 === 'string') {\n                            element.setAttribute('class', value_1);\n                        }\n                        else if (Array.isArray(value_1) && value_1.length && typeof value_1[0] === 'string') {\n                            element.setAttribute('class', value_1.join(' '));\n                        }\n                        else {\n                            debug(\"unrecognized className value \" + typeof value_1 + \" \" + value_1);\n                        }\n                    }\n                    else {\n                        element.setAttribute(name_1, value_1.toString());\n                    }\n                }\n                else if (typeof value_1 === 'object') {\n                    if (name_1 === 'style') {\n                        element.setAttribute('style', \"\" + Object.keys(value_1)\n                            .map(function (p) { return p + \": \" + value_1[p]; })\n                            .join('; '));\n                    }\n                    else if (name_1 === 'dangerouslySetInnerHTML' && value_1 && typeof value_1.__html === 'string') {\n                        element.dangerouslySetInnerHTML(value_1.__html);\n                    }\n                    else {\n                        debug(\"unrecognized object attribute \\\"\" + name_1 + \"\\\" - the only object attribute supported is \\\"style\\\"\");\n                    }\n                }\n                else {\n                    debug(\"unrecognized attribute \\\"\" + name_1 + \"\\\" with type \" + typeof value_1);\n                }\n            }\n        };\n        // if(onElementCreate){\n        //   onElementCreate({elementLike: element, elementClassInstance})\n        // }\n        // elementClassInstance=elementClassInstance || lastElementClassInstance\n        for (var name_1 in attrs) {\n            _loop_1(name_1);\n        }\n        if (typeof tag === 'string') {\n            // don't render children for function or classes since they are responsible of render their own children\n            children\n                .filter(function (c) { return c; })\n                .forEach(function (child) {\n                if (elementImpl_1.isNode(child)) {\n                    element.appendChild(child);\n                }\n                else if (Array.isArray(child)) {\n                    child.forEach(function (c) {\n                        if (typeof c === 'string') {\n                            element.appendChild(new textNodeImpl(c));\n                        }\n                        else if (elementImpl_1.isNode(c)) {\n                            element.appendChild(c);\n                        }\n                        else {\n                            debug(\"Child is not a node or string: \" + c + \" , tag: \" + tag);\n                        }\n                    });\n                }\n                else {\n                    element.appendChild(new textNodeImpl(child));\n                }\n            });\n        }\n        if (onElementReady) {\n            onElementReady({ elementLike: element });\n        }\n        return element;\n    };\n    return createElement;\n}\nexports.createCreateElement = createCreateElement;\nexports.AbstractJSXAlone = null;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// import { AbstractJSXAlone as  } from './createElement';\nvar _1 = require(\".\");\n// export type Props = { children: Children }\n// TODO: like React.Fragment\nexports.Fragment = function (props) { return _1.AbstractJSXAlone.createElement(\"span\", null, props.children); };\nfunction Js(props) {\n    var r = props.children();\n    console.log(r);\n    return r ? _1.AbstractJSXAlone.createElement(exports.Fragment, null, r) : null;\n}\nexports.Js = Js;\n/** if as statement. children need to be in a function and the function accepts a parameter which value is given condition `c` but casted to NotFalsy<C> so there's no need of type guards in the body. Example:\n```\n<If c={type}>{type =>\n  <select multiple={true}>{names[type].map(c =>\n      <option value={c.id}>{c.label}</option>)}\n  </select>\n</If>\n```\n\nNo error thrown on second line because parameter type is not falsy but keep the original type (excluding falsy values)\n\nOther example:\n\n```\nexport class ErrorComponent extends React.Component<ErrorOptions> {\n  public render() {\n    return <div>\n      <If c={this.props.error}>{error =>\n        <React.Fragment>\n          <h2>Error</h2>\n          <If c={typeof error === 'string'}>{e =>\n            <h3>{e}</h3>}\n          </If>\n          <If c={typeof error === 'object'}>{e =>\n            <React.Fragment>\n              <h5>{error!.name}</h5>\n              <p>{error!.message}</p>\n              <If c={error.stack}>{e =>\n                <ul>\n                  {e.split('\\n').map(e =>\n                    <li>{e}</li>)}\n                </ul>}\n              </If>\n            </React.Fragment>}\n          </If>\n          <If c={this.props.responseText}>{responseText =>\n            <iframe css={{ border: 0, width: '100%', height: '400px' }} srcDoc={responseText}>\n            </iframe>}\n          </If>\n        </React.Fragment>}\n      </If>\n    </div>\n  }\n}\n\n```\n*/\nfunction If(props) {\n    //TODO: issue in dom implementation, children is an array \n    var f = Array.isArray(props.children) ? props.children[0] : props.children;\n    var c = props.c, p = props.p;\n    if (isNotFalsy(c))\n        return f.apply(null, (p ? [p] : []).concat([c]));\n    else {\n        return null;\n    }\n}\nexports.If = If;\nfunction isNotFalsy(a) { return !!a; }\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./elementImpl\"));\n__export(require(\"./elementClass\"));\n__export(require(\"./createElement\"));\nvar elementImpl_1 = require(\"./elementImpl\");\nexports.AbstractTextNodeLike = elementImpl_1.AbstractTextNodeLike;\nexports.AbstractElementLike = elementImpl_1.AbstractElementLike;\n__export(require(\"./misc\"));\n__export(require(\"./util\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_alone_core_1 = require(\"jsx-alone-core\");\nvar ElementLikeImpl = /** @class */ (function (_super) {\n    __extends(ElementLikeImpl, _super);\n    function ElementLikeImpl() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElementLikeImpl.prototype.render = function (config) {\n        var _this = this;\n        if (config === void 0) { config = {}; }\n        var el = document.createElement(this.tag);\n        Object.keys(this.attrs).forEach(function (attribute) {\n            var value = _this.attrs[attribute];\n            if (!config.handleAttribute || !config.handleAttribute({ config: config, el: el, attribute: attribute, value: value, elementLike: _this })) {\n                if (typeof value === 'function') {\n                    el.setAttribute(attribute, value.toString());\n                }\n                else {\n                    el.setAttribute(attribute, value + '');\n                }\n            }\n        });\n        if (this._innerHtml) {\n            el.innerHTML = this._innerHtml;\n        }\n        this.children.forEach(function (c) {\n            if (!config.handleChildRender || !config.handleChildRender({ config: config, parent: el, child: c, elementLike: _this })) {\n                c.render(__assign({}, config, { parent: el }));\n            }\n        });\n        if (config.parent) {\n            config.parent.appendChild(el);\n        }\n        if (config.handleAfterRender) {\n            config.handleAfterRender({ config: config, el: el, elementLike: this });\n        }\n        return el;\n    };\n    ElementLikeImpl.prototype.dangerouslySetInnerHTML = function (s) {\n        this._innerHtml = s;\n    };\n    return ElementLikeImpl;\n}(jsx_alone_core_1.AbstractElementLike));\nexports.ElementLikeImpl = ElementLikeImpl;\n// export interface ElementLikeImplRenderConfig extends ElementLikeImplRenderConfig {\n//   parent?: HTMLElement,\n//   dontAddEventListeners?: boolean\n//   initialContext?: any\n// }\n// class AttributeHandlerElement extends ElementLikeImpl {\n//   _elementClassInstance: ElementClass | undefined\n//   _originalElementClassInstance: ElementClass | undefined\n//   render(config: ElementLikeImplRenderConfig = {}): HTMLElement | Text {\n//     // this is the context in which  function attributes of this and descendants will be evaluated. It's set up by createCreateElementConfig see below.\n//     const elementClassInstance =\n//       (this.parentElement && (this.parentElement as ElementLikeImpl)._elementClassInstance) || this._elementClassInstance\n//     const functionAttributeContext = elementClassInstance || config.initialContext\n//     if (typeof value === 'function') {\n//       if (config.dontAddEventListeners) {\n//         el.setAttribute(attribute, value.toString())\n//       } else {\n//         let fn = functionAttributeContext ? value.bind(functionAttributeContext) : value\n//         //TODO: el.removeEventListener??\n//         el.addEventListener(attribute.substring(2, attribute.length).toLowerCase(), fn)\n//         this.attrs[attribute] = undefined // forget the attribute\n//       }\n//     }\n//     // handleChildRender\n//       if (isElementLikeImpl(c) && functionAttributeContext) {\n//         c._originalElementClassInstance =c._elementClassInstance\n//         c._elementClassInstance = elementClassInstance || c._elementClassInstance\n//       }\n//       c.render({ ...config, parent: el })\n//       // .handleAfterRender\n//     const elementClassWithContainer = this._originalElementClassInstance || this._elementClassInstance\n//     if (elementClassWithContainer && elementClassWithContainer.setContainerEl) {\n//       elementClassWithContainer.setContainerEl(el)\n//     }\n//     this._elementClassInstance = undefined // forget the reference\n//     this._originalElementClassInstance = undefined // forget the reference\n//     // create create config\n//   onElementCreate({ elementLike, elementClassInstance }: { elementLike: ElementLikeImpl; elementClassInstance?: JSXAloneComponent }) {\n//     if (elementClassInstance) {\n//       elementLike._elementClassInstance = (elementClassInstance as any) as ElementClass\n//     }\n//   }\n//   }\n// }\nvar TextNodeLikeImpl = /** @class */ (function (_super) {\n    __extends(TextNodeLikeImpl, _super);\n    function TextNodeLikeImpl() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TextNodeLikeImpl.prototype.render = function (config) {\n        if (config === void 0) { config = {}; }\n        var text = document.createTextNode(this.content);\n        if (config.parent) {\n            config.parent.appendChild(text);\n        }\n        return text;\n    };\n    return TextNodeLikeImpl;\n}(jsx_alone_core_1.AbstractTextNodeLike));\nexports.TextNodeLikeImpl = TextNodeLikeImpl;\nvar ElementClass = /** @class */ (function (_super) {\n    __extends(ElementClass, _super);\n    function ElementClass() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /** element classes in DOM implementation will be given its container element. The default implementation just ignore this to keep it lightweight, but other implementations could overwrite this method */\n    ElementClass.prototype.setContainerEl = function (el) { };\n    return ElementClass;\n}(jsx_alone_core_1.ElementClass));\nexports.ElementClass = ElementClass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_alone_core_1 = require(\"jsx-alone-core\");\nvar elementImpl_1 = require(\"./elementImpl\");\nexports.createCreateElementConfig = {\n    impl: elementImpl_1.ElementLikeImpl,\n    textNodeImpl: elementImpl_1.TextNodeLikeImpl,\n    functionAttributes: 'preserve'\n};\nvar Module = {\n    createElement: jsx_alone_core_1.createCreateElement(exports.createCreateElementConfig),\n    render: function (el, config) {\n        if (config === void 0) { config = {}; }\n        var elementLike = el;\n        return elementLike.render({ config: config });\n    }\n};\nexports.JSXAlone = Module;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./createElement\"));\n__export(require(\"./elementImpl\"));\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar jsx_alone_core_1 = require(\"jsx-alone-core\");\nvar jsx_alone_dom_1 = require(\"jsx-alone-dom\");\nexports.ElementClass = jsx_alone_dom_1.ElementClass;\nfunction buildExtraConfig(rootElementLike, extraConfig) {\n    var configHooks = {\n        handleAttribute: function (_a) {\n            var value = _a.value, el = _a.el, attribute = _a.attribute, elementLike = _a.elementLike;\n            if (typeof value === 'function' && !extraConfig.dontAddEventListeners) {\n                var functionAttributeContext = getFunctionAttributeContextObjects(elementLike, extraConfig.initialContext).functionAttributeContext;\n                var fn = functionAttributeContext ? value.bind(functionAttributeContext) : value;\n                el.addEventListener(attribute.substring(2, attribute.length).toLowerCase(), fn);\n                elementLike.attrs[attribute] = undefined; // forget the reference\n                return true;\n            }\n            return false;\n        },\n        handleChildRender: function (config) {\n            var child = config.child, parent = config.parent, elementLike = config.elementLike;\n            var _a = getFunctionAttributeContextObjects(elementLike, extraConfig.initialContext), functionAttributeContext = _a.functionAttributeContext, elementClassInstance = _a.elementClassInstance;\n            if (functionAttributeContext && isFunctionAttributeElement(child)) {\n                child._originalElementClassInstance = child._elementClassInstance;\n                child._elementClassInstance = elementClassInstance || child._elementClassInstance;\n            }\n            child.render(__assign({}, config, configHooks, { parent: parent }));\n            return true;\n        },\n        handleAfterRender: function (_a) {\n            var el = _a.el, elementLike = _a.elementLike;\n            var elementClassWithContainer = elementLike._originalElementClassInstance || elementLike._elementClassInstance || rootElementLike._elementClassInstance;\n            if (elementClassWithContainer && elementClassWithContainer.setContainerEl) {\n                elementClassWithContainer.setContainerEl(el);\n            }\n            elementLike._elementClassInstance = undefined; // forget the reference\n            elementLike._originalElementClassInstance = undefined; // forget the reference\n            return true;\n        }\n    };\n    return configHooks;\n    function getFunctionAttributeContextObjects(elementLike, initialContext) {\n        var elementClassInstance = (elementLike.parentElement && elementLike._elementClassInstance) || rootElementLike._elementClassInstance;\n        return { functionAttributeContext: elementClassInstance || initialContext, elementClassInstance: elementClassInstance };\n    }\n}\nexports.createCreateConfig = __assign({}, jsx_alone_dom_1.createCreateElementConfig, { impl: jsx_alone_dom_1.ElementLikeImpl, textNodeImpl: jsx_alone_dom_1.TextNodeLikeImpl, functionAttributes: 'preserve', onElementCreated: function (_a) {\n        var elementLike = _a.elementLike, elementClassInstance = _a.elementClassInstance;\n        if (elementClassInstance) {\n            elementLike._elementClassInstance = elementClassInstance;\n        }\n    } });\nvar Module = {\n    createElement: jsx_alone_core_1.createCreateElement(exports.createCreateConfig),\n    render: function (el, config) {\n        if (config === void 0) { config = {}; }\n        var elementLike = el;\n        return elementLike.render(__assign({}, config, buildExtraConfig(elementLike, { initialContext: config.initialContext || this })));\n    }\n};\nexports.JSXAlone = Module;\nfunction isFunctionAttributeElement(a) {\n    return jsx_alone_core_1.isElementLike(a);\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\".\");\nvar StatefulElementClass = /** @class */ (function (_super) {\n    __extends(StatefulElementClass, _super);\n    function StatefulElementClass(p) {\n        var _this = _super.call(this, p) || this;\n        _this.state = {};\n        _this.containerEl = undefined;\n        _this.state = __assign({}, p);\n        return _this;\n    }\n    /** changes the state, clean up containerEl and renders the element again and append it to containerEl.\n     * Notice that descendant elements will be destroyed and */\n    StatefulElementClass.prototype.setState = function (s) {\n        this.state = __assign({}, this.state, s); //= { start: 0, end: 0, direction: undefined }\n        var activePath;\n        var selection = { start: 0, end: 0 };\n        if (document.activeElement) {\n            activePath = getXPathOfElement(document.activeElement);\n            selection = {\n                start: document.activeElement.selectionStart || 0,\n                end: document.activeElement.selectionEnd || 0,\n                direction: document.activeElement.selectionDirection || undefined\n            };\n        }\n        var jsx = this.render();\n        var el = _1.JSXAlone.render(jsx, { initialContext: this });\n        this.containerEl.parentElement.replaceChild(el, this.containerEl); // This should remove event listeners too. TODO: verify\n        this.containerEl = el;\n        if (activePath) {\n            var activeEl = getElementByXPath(activePath + '');\n            if (activeEl && selection) {\n                activeEl.focus();\n                if (activeEl.setSelectionRange) {\n                    activeEl.setSelectionRange(selection.start, selection.end, selection.direction);\n                }\n            }\n        }\n    };\n    /** called by ElementLike.render() */\n    StatefulElementClass.prototype.setContainerEl = function (el) {\n        this.containerEl = el;\n    };\n    return StatefulElementClass;\n}(_1.ElementClass));\nexports.StatefulElementClass = StatefulElementClass;\n//  TODO: move to misc\nfunction getXPathOfElement(el) {\n    if (typeof el == 'string') {\n        return document.evaluate(el, document, null, 0, null) + '';\n    }\n    if (!el || el.nodeType != 1) {\n        return '';\n    }\n    if (el.id)\n        return \"//*[@id='\" + el.id + \"']\";\n    if (el.parentNode) {\n        var sames = Array.from(el.parentNode.children).filter(function (x) { return x.tagName == el.tagName; });\n        return (getXPathOfElement(el.parentNode) +\n            '/' +\n            (el.tagName || '').toLowerCase() +\n            (sames.length > 1 ? '[' + (sames.indexOf(el) + 1) + ']' : ''));\n    }\n    else {\n        return undefined;\n    }\n}\n//  TODO: move to misc\nfunction getElementByXPath(path, predicate) {\n    var p = document.evaluate(path, document, null, 0, null);\n    if (!predicate) {\n        return p.iterateNext();\n    }\n    try {\n        var n = void 0;\n        var n2 = void 0;\n        while ((n = p.iterateNext()) && !predicate(n)) {\n            n2 = n;\n        }\n        return n2;\n    }\n    catch (e) {\n        alert('Error: Document tree modified during iteration ' + e);\n    }\n}\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./createElement\"));\n__export(require(\"./StatefulElementClass\"));\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar __1 = require(\"..\");\nfunction statefulElementClassTestRenderApp() {\n    var parent = document.createElement('div');\n    document.body.appendChild(parent);\n    var el = __1.JSXAlone.render(__1.JSXAlone.createElement(App, { people: [{ name: 'seba' }, { name: 'lau' }] }), { parent: parent, initialContext: this });\n    parent.appendChild(el);\n    return parent;\n}\nexports.statefulElementClassTestRenderApp = statefulElementClassTestRenderApp;\nvar Repeater = /** @class */ (function (_super) {\n    __extends(Repeater, _super);\n    function Repeater() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // constructor(p: RepeaterP) {\n    //   super(p)\n    //   this.state = { ...p }\n    // }\n    Repeater.prototype.render = function () {\n        var _this = this;\n        return (__1.JSXAlone.createElement(\"div\", { className: \"Repeater\" },\n            \"Write something:\",\n            __1.JSXAlone.createElement(\"input\", { value: this.state.value, onKeyUp: function (e) {\n                    _this.setState({ value: e.currentTarget.value });\n                } }),\n            __1.JSXAlone.createElement(\"br\", null),\n            \"Will be repeated: \",\n            __1.JSXAlone.createElement(\"span\", null, this.state.value),\n            ' '));\n    };\n    return Repeater;\n}(__1.StatefulElementClass));\nvar App = /** @class */ (function (_super) {\n    __extends(App, _super);\n    function App() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // constructor(p: P) {\n    //   super(p)\n    //   this.state = { ...p }\n    // }\n    App.prototype.render = function () {\n        var _this = this;\n        return (__1.JSXAlone.createElement(\"div\", { className: \"App\" },\n            __1.JSXAlone.createElement(\"button\", { id: \"add\", onClick: function (e) { return _this.setState({ people: _this.state.people.concat([{ name: 'random name ' + Math.random() }]) }); } }, \"add\"),\n            __1.JSXAlone.createElement(\"ul\", null, this.state.people.map(function (p) { return (__1.JSXAlone.createElement(\"li\", { \"data-id\": p.name },\n                __1.JSXAlone.createElement(Repeater, { value: p.name }),\n                __1.JSXAlone.createElement(\"button\", { className: \"remove\", onClick: function (e) {\n                        _this.setState({ people: _this.state.people.filter(function (p2) { return p2.name !== p.name; }) });\n                    } }, \"remove\"))); }))));\n    };\n    return App;\n}(__1.StatefulElementClass));\n// dummySpec()\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar statefulElementClassTestRenderApp_1 = require(\"./statefulElementClassTestRenderApp\");\nstatefulElementClassTestRenderApp_1.statefulElementClassTestRenderApp();\n// dummySpec()\n"]}