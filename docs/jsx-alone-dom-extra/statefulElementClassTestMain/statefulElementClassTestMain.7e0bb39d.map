{"version":3,"sources":["../../src/elementImpl.ts","../../src/elementClass.ts","../../src/createElement.ts","../../src/misc.tsx","../../src/util.ts","../../src/index.ts","../createElement.ts","../StatefulComponent.tsx","../DestructiveDomRenderComponent.tsx","../index.ts","statefulElementClassTestRenderApp.tsx","statefulElementClassTestMain.tsx"],"names":[],"mappings":";;;;AACA,SAAgB,mBAAhB,CAAoC,CAApC,EAA0C;AACxC,SAAO,CAAC,CAAC,SAAF,IAAe,CAAC,CAAC,SAAF,CAAY,MAAlC;AACD;;AAFD,OAAA,CAAA,mBAAA,GAAA,mBAAA;;AAIA,SAAgB,MAAhB,CAA0B,CAA1B,EAAgC;AAC9B,SAAO,cAAc,CAAC,CAAD,CAAd,IAAqB,aAAa,CAAC,CAAD,CAAzC;AACD;;AAFD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAIA,SAAgB,aAAhB,CAAiC,CAAjC,EAAuC;AACrC,SAAO,CAAC,IAAI,CAAC,CAAC,YAAd;AACD;;AAFD,AIRA,OJQA,CAAA,CIRgB,UAAhB,CAA8B,CJQ9B,AIRA,EAAqC,CJQrC,EIRA,EAAwE,SJQxE;AIRqC,MAAA,GAAA,KAAA,KAAA,CAAA,EAAA;AJYrC,AIZqC,IAAA,GAAA,EJYrB,CIZqB,aJYrC,CAAkC,CAAlC,EAAwC,YIZH;AJanC,AIbsE,SJa/D,CAAC,IAAI,CAAC,CAAC,OAAP,IAAkB,CAAC,aAAa,CAAC,CAAD,CAAvC;AACD;AIbC,MAAI,CAAC,CAAL,EAAQ;AJWV,AIXY,OJWZ,CAAA,EIXkB,IAAI,KAAJ,CAAU,EJW5B,CIXkB,CAAN,CJWZ,cAAA;AIXkC;AJgBlC,IAAA,oBAAA,GAAA,YAAA;AACE,AIhBA,SAAO,CAAP,CJgBA,oBAAA,CAAmB,OAAnB,EAAkC;AAAf,AIfpB,SJeoB,OAAA,GAAA,OAAA;AAAmB;AIlBxC,OAAA,CAAA,UAAA,GAAA,UAAA;AJoBA,SAAA,oBAAA;AAHA,AIPA,CJOA,EAAA,MIPgB,KAAhB,CAAkC,CAAlC,EAA6C,MAA7C,EAAuD;AACrD,MAAM,CAAC,GAAmB,EAA1B;AJMoB,OAAA,CAAA,oBAAA,GAAA,oBAAA;AILpB,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B;AJS9B,AIRI,IJQJ,AIRI,CAAC,CAAC,IAAF,CAAO,OAAO,KJQlB,CIRW,EJQX,GIR6B,SJQ7B,EIRW,GAAgC,CAAhC,GAAoC,MAA3C;AJeF,AIdC,WJcD,mBAAA,CAAmB,GAAnB,EAA8B;AAAX,SAAA,GAAA,GAAA,GAAA;AACjB,AIdF,SJcO,AIdA,CAAP,IJcE,GAAa,EAAb;AACA,AIdH,SJcQ,QAAL,GAAgB,EAAhB;AACD;AIrBH,OAAA,CAAA,KAAA,GAAA,KAAA;AJyBE,EAAA,mBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,IAAb,EAA2B,KAA3B,EAAwC;AACtC,AInBJ,SJmBS,AInBO,KJmBZ,CAAW,AInBf,CAAuB,CAAvB,EJmBI,AInB8B,CAAlC,EAA2C,CJmBpB,KAAnB;AACD,AInBD,GJiBA,MIjBO,KAAK,CAAC,CAAD,EAAI,CAAJ,CAAL,CAAY,IAAZ,CAAiB,EAAjB,CAAP;AACD;AJoBC,EAAA,mBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,CAAZ,EAA0B;AACxB,AIvBJ,OAAA,CAAA,CJuBS,KIvBT,GJuBI,AIvBJ,CJuBkB,IAAd,CAAmB,AIvBvB,CJuBI;;AACA,AIrBJ,QJqBQ,CIrBQ,MAAhB,CAAuB,CAAvB,EAAsC,EJqBjB,CAAI,CAAJ,CAAjB,EAAyB,AIrB7B,EAAiD;AJsB3C,AItBiB,MJsBjB,AItBiB,CJsBhB,AItBgB,CJsBf,IItBe,KAAA,CAAA,EAAA,CJsBjB,GAAkB,IAAlB;AACD,AIvBkB,IAAA,CAAA,GAAA,CAAA;AJwBpB,AIxBiC,GJmBlC;;AA4DF,AI/EsC,MAAA,GJ+EtC,II/EsC,KAAA,KAAA,CAAA,EAAA,EJ+EtC;AA9EA,AIDsC,CJCtC,EAAA,CIDsC,OAAA,GAAA,CAAA;AAAW;AJC3B,OAAA,CAAA,mBAAA,GAAA,mBAAA;AIApB,SAAO,MAAM,CAAC,CAAC,GAAG,OAAL,EAAc,GAAd,CAAb;AACD;;AAFD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAIA,SAAgB,WAAhB,CAA4B,MAA5B,EAA4C,SAA5C,EAA+D,KAA/D,EAA4E;AAC1E,SAAO,MAAM,CAAC,KAAP,CAAa,SAAb,EAAwB,KAAxB,EAA+B,IAA/B,CAAoC,SAApC,EAA+C,MAAtD;AACD;;AAFD,OAAA,CAAA,WAAA,GAAA,WAAA;;AAIA,SAAgB,YAAhB,CAA6B,CAA7B,EAAwC,WAAxC,EAAuD;AAAf,MAAA,WAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,WAAA,GAAA,GAAA;AAAe;;AACrD,SAAO,CAAC,CAAC,OAAF,CAAU,OAAV,EAAmB,WAAnB,EAAgC,IAAhC,EAAP;AACD;;AAFD,OAAA,CAAA,YAAA,GAAA,YAAA;;AAGA,SAAgB,gBAAhB,CAAiC,CAAjC,EAA4C,CAA5C,EAAqD;AACnD,SAAO,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,CAA3B,IAAgC,CAAvC;AACD;;AAFD,OAAA,CAAA,gBAAA,GAAA,gBAAA;;AAIA,SAAgB,UAAhB,CAA8B,KAA9B,EAAwC;AACtC,SAAO,KAAK,CAAC,gBAAgB,CAAC,CAAD,EAAI,KAAK,CAAC,MAAV,CAAjB,CAAZ;AACD;;AAFD,OAAA,CAAA,UAAA,GAAA,UAAA;;AAKA,SAAgB,OAAhB,CAAwB,EAAxB,EAAoC,MAApC,EAI+C;AAJX,MAAA,MAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA;AAI9B,MAAA,OAAO,EAAE,KAJqB;AAId,MAAA,OAAO,EAAE,IAJK;AAIC,MAAA,EAAE,EAAE;AAJL,KAAA;AAIW;;AAC7C,EAAA,MAAM,GAAA,QAAA,CAAQ;AAAE,IAAA,OAAO,EAAE,KAAX;AAAkB,IAAA,OAAO,EAAE,IAA3B;AAAiC,IAAA,EAAE,EAAE;AAArC,GAAR,EAAwD,MAAxD,CAAN;AACA,MAAM,OAAO,GAAG,MAAM,CAAC,OAAP,IAAkB,IAAI,CAAC,KAAL,CAAW,EAAE,GAAG,IAAhB,CAAlC;AACA,MAAM,OAAO,GAAG,MAAM,CAAC,OAAP,IAAkB,OAAlB,IAA6B,IAAI,CAAC,KAAL,CAAW,OAAO,GAAG,EAArB,CAA7C;AACA,MAAM,YAAY,GAAG,MAAM,CAAC,EAAP,IAAa,IAAI,CAAC,KAAL,CAAW,EAAE,GAAG,IAAL,IAAa,EAAxB,CAAlC;AJhDF,AIiDE,SJjDc,AIiDP,MAAG,OAAO,GAAM,GJjDzB,CAAoC,CAApC,EAA0C,AIiDV,GAAA,WAAb,GAA2B,EAArC,KAA0C,OAAO,GAAM,OAAO,GAAA,WAAb,GAA2B,EAA5E,KAAiF,YAAY,GAAM,YAAY,GAAA,MAAlB,GAA2B,EAAxH,CAAP;AJhDA,AIiDD,SJjDQ,CAAC,CAAC,SAAF,IAAe,CAAC,CAAC,SAAF,CAAY,MAAlC;AACD;AIsCD,OAAA,CAAA,OAAA,GAAA,OAAA;AJxCA,OAAA,CAAA,mBAAA,GAAA,mBAAA;;AAIA,SAAgB,MAAhB,CAA0B,CAA1B,EAAgC;AAC9B,SAAO,cAAc,CAAC,CAAD,CAAd,IAAqB,aAAa,CAAC,CAAD,CAAzC;AACD;;AAFD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAIA,SAAgB,aAAhB,CAAiC,CAAjC,EAAuC;AACrC,SAAO,CAAC,IAAI,CAAC,CAAC,YAAd;AACD;;AAFD,OAAA,CAAA,aAAA,GAAA,aAAA;;AAIA,SAAgB,cAAhB,CAAkC,CAAlC,EAAwC;AACtC,SAAO,CAAC,IAAI,CAAC,CAAC,OAAP,IAAkB,CAAC,aAAa,CAAC,CAAD,CAAvC;AACD;;AAFD,OAAA,CAAA,cAAA,GAAA,cAAA;;AAKA,IAAA,oBAAA,GAAA,YAAA;AACE,WAAA,oBAAA,CAAmB,OAAnB,EAAkC;AAAf,SAAA,OAAA,GAAA,OAAA;AAAmB;;AAExC,SAAA,oBAAA;AAHA,CAAA,EAAA;;AAAsB,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AAItB,IAAA,mBAAA,GAAA,YAAA;AAOE,WAAA,mBAAA,CAAmB,GAAnB,EAA8B;AAAX,SAAA,GAAA,GAAA,GAAA;AACjB,SAAK,KAAL,GAAa,EAAb;AACA,SAAK,QAAL,GAAgB,EAAhB;AACD;;AAID,EAAA,mBAAA,CAAA,SAAA,CAAA,YAAA,GAAA,UAAa,IAAb,EAA2B,KAA3B,EAAwC;AACtC,SAAK,KAAL,CAAW,IAAX,IAAmB,KAAnB;AACD,GAFD;;AAIA,EAAA,mBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,CAAZ,EAA0B;AACxB,SAAK,QAAL,CAAc,IAAd,CAAmB,CAAnB;;AACA,QAAI,aAAa,CAAI,CAAJ,CAAjB,EAAyB;AACvB,MAAA,CAAC,CAAC,aAAF,GAAkB,IAAlB;AACD;AACF,GALD;;AA4DF,SAAA,mBAAA;AA9EA,CAAA,EAAA;;AAAsB,OAAA,CAAA,mBAAA,GAAA,mBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBtB,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAaA,IAAA,YAAA,GAAA,YAAA;AAEE,WAAA,YAAA,CAA4B,KAA5B,EAAuD;AAA3B,SAAA,KAAA,GAAA,KAAA;AAC3B;;AAIS,EAAA,YAAA,CAAA,SAAA,CAAA,eAAA,GAAV,YAAA;AACE,WAAQ,KAAK,CAAC,OAAN,CAAc,KAAK,KAAL,CAAW,QAAzB,IAAqC,KAAK,KAAL,CAAW,QAAhD,GAA2D,CAAC,KAAK,KAAL,CAAW,QAAZ,CAAnE;AACD,GAFS;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,uBAAA,GAAV,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,MAAvB,CAA8B,UAAA,CAAA,EAAC;AAAI,aAAA,aAAA,CAAA,aAAA,CAAiB,CAAjB,CAAA;AAAmB,KAAtD,CAAP;AACD,GAFS;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,UAAA,CAAA,EAAC;AAAI,aAAA,IAAA;AAAI,KAArC,CAAP;AACD,GAFS;;AAGZ,SAAA,YAAA;AAlBA,CAAA,EAAA;;AAAsB,OAAA,CAAA,YAAA,GAAA,YAAA;;AAmBtB,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;AAAyD,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAAzD,WAAA,oBAAA,GAAA;;AAA+E;;AAAD,SAAA,oBAAA;AAA9E,CAAA,CAAyD,YAAzD,CAAA;;AAAsB,OAAA,CAAA,oBAAA,GAAA,oBAAA;;;;;;;;;;;;;;;;;;;;;;;;ACjCtB,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAGA,IAAM,mBAAmB,GAAG,KAA5B;;AAEA,SAAgB,KAAhB,CAAsB,GAAtB,EAAiC;AAC/B,MAAI,mBAAJ,EAAyB;AACvB,UAAM,GAAN;AACD,GAFD,MAEO;AACL,IAAA,OAAO,CAAC,KAAR,CAAc,GAAd;AACD;AACF;;AAND,OAAA,CAAA,KAAA,GAAA,KAAA;;AAQA,SAAgB,mBAAhB,CAAgF,MAAhF,EAAuH;AAC7G,MAAA,IAAA,GAAA,MAAA,CAAA,IAAA;AAAA,MAAM,YAAA,GAAA,MAAA,CAAA,YAAN;AAAA,MAAoB,gBAAA,GAAA,MAAA,CAAA,gBAApB;AAAA,MAAsC,kBAAA,GAAA,MAAA,CAAA,kBAAtC;AAAA,MAA0D,cAAA,GAAA,MAAA,CAAA,cAA1D;AAAA,MAA0E,eAAA,GAAA,MAAA,CAAA,gBAA1E;;AAER,MAAM,aAAa,GAA+B,SAA5C,aAA4C,CAAS,GAAT,EAAc,KAAd,EAAwB;AAAV,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,EAAA;AAAU;;AAAE,QAAA,QAAA,GAAA,EAAA;;SAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,SAAA,CAAA,QAAA,EAAA,IAAkB;AAAlB,MAAA,QAAA,CAAA,EAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;;;AAC1E,QAAI,OAAJ;AACA,QAAI,oBAAJ;;AACA,QAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AAC3B,MAAA,OAAO,GAAG,IAAI,IAAJ,CAAS,GAAT,CAAV;AACD,KAFD,MAEO;AACL,UAAI,aAAA,CAAA,mBAAA,CAAoB,GAApB,CAAJ,EAA8B;AAC5B,QAAA,oBAAoB,GAAG,IAAI,GAAJ,CAAO,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,UAAA,QAAQ,EAAE;AAAZ,SAAX,CAAP,CAAvB;AACA,QAAA,OAAO,GAAG,oBAAoB,CAAC,MAArB,EAAV;AACD,OAHD,MAGO;AACL,YAAI,QAAO,GAAG,CAAC,SAAX,MAAyB,SAAzB,IAAsC,MAAM,CAAC,wBAAjD,EAA2E;AACzE,UAAA,OAAO,GAAG,IAAK,GAAL,CAAgB,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,YAAA,QAAQ,EAAE;AAAZ,WAAX,CAAhB,CAAV;AACD,SAFD,MAEO;AACL,UAAA,OAAO,GAAG,GAAG,CAAA,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,YAAA,QAAQ,EAAE;AAAZ,WAAX,CAAA,CAAb;AACD;AACF;;AACD,MAAA,KAAK,GAAG,EAAR;AACD;;AACD,QAAI,eAAJ,EAAqB;AACnB,MAAA,eAAe,CAAC;AAAE,QAAA,WAAW,EAAE,OAAf;AAAwB,QAAA,oBAAoB,EAAA;AAA5C,OAAD,CAAf;AACD;;mCACQ,QAAI;AACX,UAAI,MAAI,IAAI,KAAK,CAAC,cAAN,CAAqB,MAArB,CAAZ,EAAwC;AACtC,YAAI,OAAK,GAAQ,KAAK,CAAC,MAAD,CAAtB;;AACA,YAAI,OAAO,OAAP,KAAiB,SAArB,EAAgC;AAC9B,cAAI,OAAK,KAAK,IAAd,EAAoB;AAClB,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA2B,MAA3B;AACD;AACF,SAJD,MAIO,IAAI,OAAO,OAAP,KAAiB,UAArB,EAAiC;AACtC,cAAI,CAAC,kBAAD,IAAuB,kBAAkB,KAAK,UAAlD,EAA8D;AAC5D,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA2B,OAA3B;AACD,WAFD,MAEO;AACL,gBAAM,IAAI,GACR,kBAAkB,KAAK,eAAvB,GACI,+BAA6B,OAAK,CAAC,QAAN,EAA7B,GAA6C,2BADjD,GAEI,OAAK,CAAC,QAAN,EAHN;AAIA,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA4B,gBAAgB,GAAG,gBAAgB,CAAC,IAAD,CAAnB,GAA4B,IAAxE;AACD;AACF,SAVM,MAUA,IAAI,OAAK,KAAK,KAAV,IAAmB,OAAK,IAAI,IAAhC,EAAsC;AAC3C,cAAI,MAAI,KAAK,WAAb,EAA0B;AACxB,gBAAI,OAAO,OAAP,KAAiB,QAArB,EAA+B;AAC7B,cAAA,OAAO,CAAC,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACD,aAFD,MAEO,IAAI,KAAK,CAAC,OAAN,CAAc,OAAd,KAAwB,OAAK,CAAC,MAA9B,IAAwC,OAAO,OAAK,CAAC,CAAD,CAAZ,KAAoB,QAAhE,EAA0E;AAC/E,cAAA,OAAO,CAAC,YAAR,CAAqB,OAArB,EAA8B,OAAK,CAAC,IAAN,CAAW,GAAX,CAA9B;AACD,aAFM,MAEA;AACL,cAAA,KAAK,CAAC,0CAAuC,OAAvC,IAA4C,GAA5C,GAAgD,OAAjD,CAAL;AACD;AACF,WARD,MAQO;AACL,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA2B,OAAK,CAAC,QAAN,EAA3B;AACD;AACF,SAZM,MAYA,IAAI,QAAO,OAAP,MAAiB,QAArB,EAA+B;AACpC,cAAI,MAAI,KAAK,OAAb,EAAsB;AACpB,YAAA,OAAO,CAAC,YAAR,CACE,OADF,EAEE,KAAG,MAAM,CAAC,IAAP,CAAY,OAAZ,EACA,GADA,CACI,UAAA,CAAA,EAAC;AAAI,qBAAG,CAAC,GAAA,IAAD,GAAM,OAAK,CAAC,CAAD,CAAd;AAAmB,aAD5B,EAEA,IAFA,CAEK,IAFL,CAFL;AAMD,WAPD,MAOO,IAAI,MAAI,KAAK,yBAAT,IAAsC,OAAtC,IAA+C,OAAO,OAAK,CAAC,MAAb,KAAwB,QAA3E,EAAqF;AAC1F,YAAA,OAAO,CAAC,uBAAR,CAAgC,OAAK,CAAC,MAAtC;AACD,WAFM,MAEA;AACL,YAAA,KAAK,CAAC,qCAAkC,MAAlC,GAAsC,uDAAvC,CAAL;AACD;AACF,SAbM,MAaA;AACL,UAAA,KAAK,CAAC,8BAA2B,MAA3B,GAA+B,eAA/B,WAAqD,OAArD,CAAD,CAAL;AACD;AACF;AACF;;AA9CD,SAAK,IAAI,MAAT,IAAiB,KAAjB,EAAsB;cAAb;AA8CR;;AACD,QAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AAE3B,MAAA,QAAQ,CACL,MADH,CACU,UAAA,CAAA,EAAC;AAAI,eAAA,CAAA;AAAC,OADhB,EAEG,OAFH,CAEW,UAAA,KAAA,EAAK;AACZ,YAAI,aAAA,CAAA,MAAA,CAAU,KAAV,CAAJ,EAAsB;AACpB,UAAA,OAAO,CAAC,WAAR,CAAoB,KAApB;AACD,SAFD,MAEO,IAAI,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAA0B;AAC/B,UAAA,KAAK,CAAC,OAAN,CAAc,UAAA,CAAA,EAAC;AACb,gBAAI,OAAO,CAAP,KAAa,QAAjB,EAA2B;AACzB,cAAA,OAAO,CAAC,WAAR,CAAoB,IAAI,YAAJ,CAAiB,CAAjB,CAApB;AACD,aAFD,MAEO,IAAI,aAAA,CAAA,MAAA,CAAU,CAAV,CAAJ,EAAkB;AACvB,cAAA,OAAO,CAAC,WAAR,CAAoB,CAApB;AACD,aAFM,MAEA;AACL,cAAA,KAAK,CAAC,oCAAkC,CAAlC,GAAmC,UAAnC,GAA8C,GAA/C,CAAL;AACD;AACF,WARD;AASD,SAVM,MAUA;AACL,UAAA,OAAO,CAAC,WAAR,CAAoB,IAAI,YAAJ,CAAiB,KAAjB,CAApB;AACD;AACF,OAlBH;AAmBD;;AACD,QAAI,cAAJ,EAAoB;AAClB,MAAA,cAAc,CAAC;AAAE,QAAA,WAAW,EAAE;AAAf,OAAD,CAAd;AACD;;AACD,WAAO,OAAP;AACD,GA9FD;;AA+FA,SAAO,aAAP;AACD;;AAnGD,OAAA,CAAA,mBAAA,GAAA,mBAAA;AAqGa,OAAA,CAAA,gBAAA,GAAkC,IAAlC;;;;;;ACjHb,IAAA,EAAA,GAAA,OAAA,CAAA,GAAA,CAAA;;AAQa,OAAA,CAAA,QAAA,GAAW,UAAC,KAAD,EAA8B;AAAG,SAAA,EAAA,CAAA,gBAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EAAO,KAAK,CAAC,QAAb,CAAA;AAA6B,CAAzE;;AAEb,SAAgB,EAAhB,CAAmB,KAAnB,EAA8D;AAC5D,MAAM,CAAC,GAAG,KAAK,CAAC,QAAN,EAAV;AACA,EAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;AACA,SAAO,CAAC,GAAG,EAAA,CAAA,gBAAA,CAAA,aAAA,CAAC,OAAA,CAAA,QAAD,EAAS,IAAT,EAAW,CAAX,CAAH,GAA8B,IAAtC;AACD;;AAJD,OAAA,CAAA,EAAA,GAAA,EAAA;;AAsDA,SAAgB,EAAhB,CACE,KADF,EAC6E;AAE7E,MAAM,CAAC,GAAG,KAAK,CAAC,OAAN,CAAc,KAAK,CAAC,QAApB,IAAgC,KAAK,CAAC,QAAN,CAAe,CAAf,CAAhC,GAAoD,KAAK,CAAC,QAApE;AACU,MAAA,CAAA,GAAA,KAAA,CAAA,CAAA;AAAA,MAAG,CAAA,GAAA,KAAA,CAAA,CAAH;AACR,MAAI,UAAU,CAAC,CAAD,CAAd,EACE,OAAO,CAAC,CAAC,KAAF,CAAQ,IAAR,EAAkB,CAAC,CAAC,GAAG,CAAC,CAAD,CAAH,GAAS,EAAX,EAAc,MAAd,CAAc,CAAE,CAAF,CAAd,CAAlB,CAAP,CADF,KAEK;AACH,WAAO,IAAP;AACD;AACF;;AAVD,OAAA,CAAA,EAAA,GAAA,EAAA;;AAaA,SAAS,UAAT,CAAuB,CAAvB,EAA2B;AAAsB,SAAO,CAAC,CAAC,CAAT;AAAY;;;;;;;;;;;;;;;;;;;;;;AC7E7D,SAAgB,UAAhB,CAA8B,CAA9B,EAAqC,GAArC,EAAwE;AAAnC,MAAA,GAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,GAAA,GAAA,6BAAA;AAAmC;;AACtE,MAAI,CAAC,CAAL,EAAQ;AAAE,UAAM,IAAI,KAAJ,CAAU,GAAV,CAAN;AAAsB;;AAChC,SAAO,CAAP;AACD;;AAHD,OAAA,CAAA,UAAA,GAAA,UAAA;;AAUA,SAAgB,KAAhB,CAAkC,CAAlC,EAA6C,MAA7C,EAAuD;AACrD,MAAM,CAAC,GAAmB,EAA1B;;AACA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B;AAC1B,IAAA,CAAC,CAAC,IAAF,CAAO,OAAO,MAAP,KAAkB,WAAlB,GAAgC,CAAhC,GAAoC,MAA3C;AACD;;AACD,SAAO,CAAP;AACD;;AAND,OAAA,CAAA,KAAA,GAAA,KAAA;;AAOA,SAAgB,MAAhB,CAAuB,CAAvB,EAAkC,CAAlC,EAA2C;AACzC,SAAO,KAAK,CAAC,CAAD,EAAI,CAAJ,CAAL,CAAY,IAAZ,CAAiB,EAAjB,CAAP;AACD;;AAFD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAGA,SAAgB,MAAhB,CAAuB,CAAvB,EAAsC,OAAtC,EAAiD;AAA1B,MAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,CAAA,GAAA,CAAA;AAAa;;AAAE,MAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,OAAA,GAAA,CAAA;AAAW;;AAC/C,SAAO,MAAM,CAAC,CAAC,GAAG,OAAL,EAAc,GAAd,CAAb;AACD;;AAFD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAIA,SAAgB,WAAhB,CAA4B,MAA5B,EAA4C,SAA5C,EAA+D,KAA/D,EAA4E;AAC1E,SAAO,MAAM,CAAC,KAAP,CAAa,SAAb,EAAwB,KAAxB,EAA+B,IAA/B,CAAoC,SAApC,EAA+C,MAAtD;AACD;;AAFD,OAAA,CAAA,WAAA,GAAA,WAAA;;AAIA,SAAgB,YAAhB,CAA6B,CAA7B,EAAwC,WAAxC,EAAuD;AAAf,MAAA,WAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,WAAA,GAAA,GAAA;AAAe;;AACrD,SAAO,CAAC,CAAC,OAAF,CAAU,OAAV,EAAmB,WAAnB,EAAgC,IAAhC,EAAP;AACD;;AAFD,OAAA,CAAA,YAAA,GAAA,YAAA;;AAGA,SAAgB,gBAAhB,CAAiC,CAAjC,EAA4C,CAA5C,EAAqD;AACnD,SAAO,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,CAA3B,IAAgC,CAAvC;AACD;;AAFD,OAAA,CAAA,gBAAA,GAAA,gBAAA;;AAIA,SAAgB,UAAhB,CAA8B,KAA9B,EAAwC;AACtC,SAAO,KAAK,CAAC,gBAAgB,CAAC,CAAD,EAAI,KAAK,CAAC,MAAV,CAAjB,CAAZ;AACD;;AAFD,OAAA,CAAA,UAAA,GAAA,UAAA;;AAKA,SAAgB,OAAhB,CAAwB,EAAxB,EAAoC,MAApC,EAI+C;AAJX,MAAA,MAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA;AAI9B,MAAA,OAAO,EAAE,KAJqB;AAId,MAAA,OAAO,EAAE,IAJK;AAIC,MAAA,EAAE,EAAE;AAJL,KAAA;AAIW;;AAC7C,EAAA,MAAM,GAAA,QAAA,CAAQ;AAAE,IAAA,OAAO,EAAE,KAAX;AAAkB,IAAA,OAAO,EAAE,IAA3B;AAAiC,IAAA,EAAE,EAAE;AAArC,GAAR,EAAwD,MAAxD,CAAN;AACA,MAAM,OAAO,GAAG,MAAM,CAAC,OAAP,IAAkB,IAAI,CAAC,KAAL,CAAW,EAAE,GAAG,IAAhB,CAAlC;AACA,MAAM,OAAO,GAAG,MAAM,CAAC,OAAP,IAAkB,OAAlB,IAA6B,IAAI,CAAC,KAAL,CAAW,OAAO,GAAG,EAArB,CAA7C;AACA,MAAM,YAAY,GAAG,MAAM,CAAC,EAAP,IAAa,IAAI,CAAC,KAAL,CAAW,EAAE,GAAG,IAAL,IAAa,EAAxB,CAAlC;AACA,SAAO,MAAG,OAAO,GAAM,OAAO,GAAA,WAAb,GAA2B,EAArC,KAA0C,OAAO,GAAM,OAAO,GAAA,WAAb,GAA2B,EAA5E,KAAiF,YAAY,GAAM,YAAY,GAAA,MAAlB,GAA2B,EAAxH,CAAP;AACD;;AAVD,OAAA,CAAA,OAAA,GAAA,OAAA;;;;;;;;;;;;ACvCA,QAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AAIA,QAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;;AACA,QAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AAEA,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAAQ,OAAA,CAAA,oBAAA,GAAA,aAAA,CAAA,oBAAA;AAAsB,OAAA,CAAA,mBAAA,GAAA,aAAA,CAAA,mBAAA;;AAC9B,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;;AACA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AJVA,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAaA,IAAA,YAAA,GAAA,YAAA;AAEE,WAAA,YAAA,CAA4B,KAA5B,EAAuD;AAA3B,SAAA,KAAA,GAAA,KAAA;AAC3B;;AAIS,EAAA,YAAA,CAAA,SAAA,CAAA,eAAA,GAAV,YAAA;AACE,WAAQ,KAAK,CAAC,OAAN,CAAc,KAAK,KAAL,CAAW,QAAzB,IAAqC,KAAK,KAAL,CAAW,QAAhD,GAA2D,CAAC,KAAK,KAAL,CAAW,QAAZ,CAAnE;AACD,GAFS;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,uBAAA,GAAV,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,MAAvB,CAA8B,UAAA,CAAA,EAAC;AAAI,aAAA,aAAA,CAAA,aAAA,CAAiB,CAAjB,CAAA;AAAmB,KAAtD,CAAP;AACD,GAFS;;AAIA,EAAA,YAAA,CAAA,SAAA,CAAA,iBAAA,GAAV,YAAA;AACE,WAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,UAAA,CAAA,EAAC;AAAI,aAAA,IAAA;AAAI,KAArC,CAAP;AACD,GAFS;;AAGZ,SAAA,YAAA;AAlBA,CAAA,EAAA;;AAAsB,OAAA,CAAA,YAAA,GAAA,YAAA;;AAmBtB,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;AAAyD,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAAzD,WAAA,oBAAA,GAAA;;AAA+E;;AAAD,SAAA,oBAAA;AAA9E,CAAA,CAAyD,YAAzD,CAAA;;AAAsB,OAAA,CAAA,oBAAA,GAAA,oBAAA;;;;;;;;;;;;;;;;;;;;;;;;ACjCtB,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAGA,IAAM,mBAAmB,GAAG,KAA5B;;AAEA,SAAgB,KAAhB,CAAsB,GAAtB,EAAiC;AAC/B,MAAI,mBAAJ,EAAyB;AACvB,UAAM,GAAN;AACD,GAFD,MAEO;AACL,IAAA,OAAO,CAAC,KAAR,CAAc,GAAd;AACD;AACF;;AAND,OAAA,CAAA,KAAA,GAAA,KAAA;;AAQA,SAAgB,mBAAhB,CAAgF,MAAhF,EAAuH;AAC7G,MAAA,IAAA,GAAA,MAAA,CAAA,IAAA;AAAA,MAAM,YAAA,GAAA,MAAA,CAAA,YAAN;AAAA,MAAoB,gBAAA,GAAA,MAAA,CAAA,gBAApB;AAAA,MAAsC,kBAAA,GAAA,MAAA,CAAA,kBAAtC;AAAA,MAA0D,cAAA,GAAA,MAAA,CAAA,cAA1D;AAAA,MAA0E,eAAA,GAAA,MAAA,CAAA,gBAA1E;;AAER,MAAM,aAAa,GAA+B,SAA5C,aAA4C,CAAS,GAAT,EAAc,KAAd,EAAwB;AAAV,QAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,KAAA,GAAA,EAAA;AAAU;;AAAE,QAAA,QAAA,GAAA,EAAA;;SAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,SAAA,CAAA,QAAA,EAAA,IAAkB;AAAlB,MAAA,QAAA,CAAA,EAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;;;AAC1E,QAAI,OAAJ;AACA,QAAI,oBAAJ;;AACA,QAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AAC3B,MAAA,OAAO,GAAG,IAAI,IAAJ,CAAS,GAAT,CAAV;AACD,KAFD,MAEO;AACL,UAAI,aAAA,CAAA,mBAAA,CAAoB,GAApB,CAAJ,EAA8B;AAC5B,QAAA,oBAAoB,GAAG,IAAI,GAAJ,CAAO,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,UAAA,QAAQ,EAAE;AAAZ,SAAX,CAAP,CAAvB;AACA,QAAA,OAAO,GAAG,oBAAoB,CAAC,MAArB,EAAV;AACD,OAHD,MAGO;AACL,YAAI,QAAO,GAAG,CAAC,SAAX,MAAyB,SAAzB,IAAsC,MAAM,CAAC,wBAAjD,EAA2E;AACzE,UAAA,OAAO,GAAG,IAAK,GAAL,CAAgB,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,YAAA,QAAQ,EAAE;AAAZ,WAAX,CAAhB,CAAV;AACD,SAFD,MAEO;AACL,UAAA,OAAO,GAAG,GAAG,CAAA,QAAA,CAAA,EAAA,EAAM,KAAN,EAAW;AAAE,YAAA,QAAQ,EAAE;AAAZ,WAAX,CAAA,CAAb;AACD;AACF;;AACD,MAAA,KAAK,GAAG,EAAR;AACD;;AACD,QAAI,eAAJ,EAAqB;AACnB,MAAA,eAAe,CAAC;AAAE,QAAA,WAAW,EAAE,OAAf;AAAwB,QAAA,oBAAoB,EAAA;AAA5C,OAAD,CAAf;AACD;;mCACQ,QAAI;AACX,UAAI,MAAI,IAAI,KAAK,CAAC,cAAN,CAAqB,MAArB,CAAZ,EAAwC;AACtC,YAAI,OAAK,GAAQ,KAAK,CAAC,MAAD,CAAtB;;AACA,YAAI,OAAO,OAAP,KAAiB,SAArB,EAAgC;AAC9B,cAAI,OAAK,KAAK,IAAd,EAAoB;AAClB,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA2B,MAA3B;AACD;AACF,SAJD,MAIO,IAAI,OAAO,OAAP,KAAiB,UAArB,EAAiC;AACtC,cAAI,CAAC,kBAAD,IAAuB,kBAAkB,KAAK,UAAlD,EAA8D;AAC5D,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA2B,OAA3B;AACD,WAFD,MAEO;AACL,gBAAM,IAAI,GACR,kBAAkB,KAAK,eAAvB,GACI,+BAA6B,OAAK,CAAC,QAAN,EAA7B,GAA6C,2BADjD,GAEI,OAAK,CAAC,QAAN,EAHN;AAIA,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA4B,gBAAgB,GAAG,gBAAgB,CAAC,IAAD,CAAnB,GAA4B,IAAxE;AACD;AACF,SAVM,MAUA,IAAI,OAAK,KAAK,KAAV,IAAmB,OAAK,IAAI,IAAhC,EAAsC;AAC3C,cAAI,MAAI,KAAK,WAAb,EAA0B;AACxB,gBAAI,OAAO,OAAP,KAAiB,QAArB,EAA+B;AAC7B,cAAA,OAAO,CAAC,YAAR,CAAqB,OAArB,EAA8B,OAA9B;AACD,aAFD,MAEO,IAAI,KAAK,CAAC,OAAN,CAAc,OAAd,KAAwB,OAAK,CAAC,MAA9B,IAAwC,OAAO,OAAK,CAAC,CAAD,CAAZ,KAAoB,QAAhE,EAA0E;AAC/E,cAAA,OAAO,CAAC,YAAR,CAAqB,OAArB,EAA8B,OAAK,CAAC,IAAN,CAAW,GAAX,CAA9B;AACD,aAFM,MAEA;AACL,cAAA,KAAK,CAAC,0CAAuC,OAAvC,IAA4C,GAA5C,GAAgD,OAAjD,CAAL;AACD;AACF,WARD,MAQO;AACL,YAAA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA2B,OAAK,CAAC,QAAN,EAA3B;AACD;AACF,SAZM,MAYA,IAAI,QAAO,OAAP,MAAiB,QAArB,EAA+B;AACpC,cAAI,MAAI,KAAK,OAAb,EAAsB;AACpB,YAAA,OAAO,CAAC,YAAR,CACE,OADF,EAEE,KAAG,MAAM,CAAC,IAAP,CAAY,OAAZ,EACA,GADA,CACI,UAAA,CAAA,EAAC;AAAI,qBAAG,CAAC,GAAA,IAAD,GAAM,OAAK,CAAC,CAAD,CAAd;AAAmB,aAD5B,EAEA,IAFA,CAEK,IAFL,CAFL;AAMD,WAPD,MAOO,IAAI,MAAI,KAAK,yBAAT,IAAsC,OAAtC,IAA+C,OAAO,OAAK,CAAC,MAAb,KAAwB,QAA3E,EAAqF;AAC1F,YAAA,OAAO,CAAC,uBAAR,CAAgC,OAAK,CAAC,MAAtC;AACD,WAFM,MAEA;AACL,YAAA,KAAK,CAAC,qCAAkC,MAAlC,GAAsC,uDAAvC,CAAL;AACD;AACF,SAbM,MAaA;AACL,UAAA,KAAK,CAAC,8BAA2B,MAA3B,GAA+B,eAA/B,WAAqD,OAArD,CAAD,CAAL;AACD;AACF;AACF;;AA9CD,SAAK,IAAI,MAAT,IAAiB,KAAjB,EAAsB;cAAb;AA8CR;;AACD,QAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AAE3B,MAAA,QAAQ,CACL,MADH,CACU,UAAA,CAAA,EAAC;AAAI,eAAA,CAAA;AAAC,OADhB,EAEG,OAFH,CAEW,UAAA,KAAA,EAAK;AACZ,YAAI,aAAA,CAAA,MAAA,CAAU,KAAV,CAAJ,EAAsB;AACpB,UAAA,OAAO,CAAC,WAAR,CAAoB,KAApB;AACD,SAFD,MAEO,IAAI,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAA0B;AAC/B,UAAA,KAAK,CAAC,OAAN,CAAc,UAAA,CAAA,EAAC;AACb,gBAAI,OAAO,CAAP,KAAa,QAAjB,EAA2B;AACzB,cAAA,OAAO,CAAC,WAAR,CAAoB,IAAI,YAAJ,CAAiB,CAAjB,CAApB;AACD,aAFD,MAEO,IAAI,aAAA,CAAA,MAAA,CAAU,CAAV,CAAJ,EAAkB;AACvB,cAAA,OAAO,CAAC,WAAR,CAAoB,CAApB;AACD,aAFM,MAEA;AACL,cAAA,KAAK,CAAC,oCAAkC,CAAlC,GAAmC,UAAnC,GAA8C,GAA/C,CAAL;AACD;AACF,WARD;AASD,SAVM,MAUA;AACL,UAAA,OAAO,CAAC,WAAR,CAAoB,IAAI,YAAJ,CAAiB,KAAjB,CAApB;AACD;AACF,OAlBH;AAmBD;;AACD,QAAI,cAAJ,EAAoB;AAClB,MAAA,cAAc,CAAC;AAAE,QAAA,WAAW,EAAE;AAAf,OAAD,CAAd;AACD;;AACD,WAAO,OAAP;AACD,GA9FD;;AA+FA,SAAO,aAAP;AACD;;AAnGD,OAAA,CAAA,mBAAA,GAAA,mBAAA;AAqGa,OAAA,CAAA,gBAAA,GAAkC,IAAlC;;;;;;ACjHb,IAAA,EAAA,GAAA,OAAA,CAAA,GAAA,CAAA;;AAQa,OAAA,CAAA,QAAA,GAAW,UAAC,KAAD,EAA8B;AAAG,SAAA,EAAA,CAAA,gBAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EAAO,KAAK,CAAC,QAAb,CAAA;AAA6B,CAAzE;;AAEb,SAAgB,EAAhB,CAAmB,KAAnB,EAA8D;AAC5D,MAAM,CAAC,GAAG,KAAK,CAAC,QAAN,EAAV;AACA,EAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;AACA,SAAO,CAAC,GAAG,EAAA,CAAA,gBAAA,CAAA,aAAA,CAAC,OAAA,CAAA,QAAD,EAAS,IAAT,EAAW,CAAX,CAAH,GAA8B,IAAtC;AACD;;AAJD,OAAA,CAAA,EAAA,GAAA,EAAA;;AAsDA,SAAgB,EAAhB,CACE,KADF,EAC6E;AAE7E,MAAM,CAAC,GAAG,KAAK,CAAC,OAAN,CAAc,KAAK,CAAC,QAApB,IAAgC,KAAK,CAAC,QAAN,CAAe,CAAf,CAAhC,GAAoD,KAAK,CAAC,QAApE;AACU,MAAA,CAAA,GAAA,KAAA,CAAA,CAAA;AAAA,MAAG,CAAA,GAAA,KAAA,CAAA,CAAH;AACR,MAAI,UAAU,CAAC,CAAD,CAAd,EACE,OAAO,CAAC,CAAC,KAAF,CAAQ,IAAR,EAAkB,CAAC,CAAC,GAAG,CAAC,CAAD,CAAH,GAAS,EAAX,EAAc,MAAd,CAAc,CAAE,CAAF,CAAd,CAAlB,CAAP,CADF,KAEK;AACH,WAAO,IAAP;AACD;AACF;;AAVD,OAAA,CAAA,EAAA,GAAA,EAAA;;AAaA,SAAS,UAAT,CAAuB,CAAvB,EAA2B;AAAsB,SAAO,CAAC,CAAC,CAAT;AAAY;;;;;;;;;;;;AE5E7D,QAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AAIA,QAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;;AACA,QAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AAEA,IAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAAQ,OAAA,CAAA,oBAAA,GAAA,aAAA,CAAA,oBAAA;AAAsB,OAAA,CAAA,mBAAA,GAAA,aAAA,CAAA,mBAAA;;AAC9B,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;;AACA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ALXA,iDAIuB;AAKvB;IAAqC,mCAAiC;IAAtE;;IAoCA,CAAC;IAjCC,gCAAM,GAAN,UAAO,MAAyD;QAAhE,iBA2BC;QA3BM,uBAAA,EAAA,WAAyD;QAC9D,IAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QAC3C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,UAAA,SAAS;YACvC,IAAM,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAA;YACnC,IAAG,CAAC,MAAM,CAAC,eAAe,IAAE,CAAC,MAAM,CAAC,eAAe,CAAC,EAAC,MAAM,QAAA,EAAE,EAAE,IAAA,EAAE,SAAS,WAAA,EAAE,KAAK,OAAA,EAAE,WAAW,EAAE,KAAI,EAAC,CAAC,EAAC;gBACrG,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;oBAC7B,EAAE,CAAC,YAAY,CAAC,SAAS,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAA;iBAC7C;qBAAQ;oBACT,EAAE,CAAC,YAAY,CAAC,SAAS,EAAE,KAAK,GAAG,EAAE,CAAC,CAAA;iBACvC;aACF;QACH,CAAC,CAAC,CAAA;QACF,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAA;SAC/B;QACD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,CAAC;YACrB,IAAG,CAAC,MAAM,CAAC,iBAAiB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAC,MAAM,QAAA,EAAE,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,WAAW,EAAE,KAAI,EAAC,CAAC,EAAC;gBAC1G,CAAqB,CAAC,MAAM,cAAM,MAAM,IAAE,MAAM,EAAE,EAAE,IAAG,CAAA;aACzD;QACH,CAAC,CAAC,CAAA;QACF,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAA;SAC9B;QACD,IAAG,MAAM,CAAC,iBAAiB,EAAC;YAC1B,MAAM,CAAC,iBAAiB,CAAC,EAAC,MAAM,QAAA,EAAE,EAAE,IAAA,EAAE,WAAW,EAAE,IAAI,EAAC,CAAC,CAAA;SAC1D;QACD,OAAO,EAAE,CAAA;IACX,CAAC;IAED,iDAAuB,GAAvB,UAAwB,CAAS;QAC/B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAA;IACrB,CAAC;IAEH,sBAAC;AAAD,CApCA,AAoCC,CApCoC,oCAAmB,GAoCvD;AApCY,0CAAe;AAsC5B;IAAsC,oCAAkC;IAAxE;;IAQA,CAAC;IAPC,iCAAM,GAAN,UAAO,MAAwC;QAAxC,uBAAA,EAAA,WAAwC;QAC7C,IAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;QAClD,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;SAChC;QACD,OAAO,IAAI,CAAA;IACb,CAAC;IACH,uBAAC;AAAD,CARA,AAQC,CARqC,qCAAoB,GAQzD;AARY,4CAAgB;AAU7B;IAAmD,gCAAqC;IAAxF;;IAGA,CAAC;IADC,qCAAc,GAAd,UAAe,EAAe,IAAG,CAAC;IACpC,mBAAC;AAAD,CAHA,AAGC,CAHkD,6BAAoB,GAGtE;AAHqB,oCAAY;;;;AEzDlC,iDAAwL;AAExL,6CAAkE;AAOrD,QAAA,yBAAyB,GAAiC;IACrE,IAAI,EAAE,6BAAe;IACrB,YAAY,EAAE,8BAAgB;IAC9B,kBAAkB,EAAE,eAAe;CAEpC,CAAA;AAED,IAAM,MAAM,GAAgD;IAE1D,aAAa,EAAE,oCAAmB,CAAgC,iCAAyB,CAAC;IAE5F,MAAM,YAAG,EAAE,EAAE,MAAS;QAAT,uBAAA,EAAA,WAAS;QAEpB,OAAQ,EAAsB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IAC/C,CAAC;CAEF,CAAA;AAUY,QAAA,QAAQ,GAA+C,MAAM,CAAA;;;;;;;AGnC1E,qCAA+B;AAE/B,mCAA6B;;;;;;;;;;;;;;;;;;;;;;;ACF7B,IAAA,gBAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAuJS,OAAA,CAAA,YAAA,GApJP,eAAA,CAAA,YAoJO;AA3GT,IAAI,SAAS,GAAG,KAAhB;;AAKA,SAAS,gBAAT,CACE,eADF,EAEE,WAFF,EAE4C;AAG1C,MAAM,WAAW,GAA2D;AAC1E,IAAA,eAAe,EAAA,yBAAC,EAAD,EAAsC;UAAnC,KAAA,GAAA,EAAA,CAAA;UAAO,EAAA,GAAA,EAAA,CAAA;UAAI,SAAA,GAAA,EAAA,CAAA;UAAW,WAAA,GAAA,EAAA,CAAA;;AACtC,UAAI,OAAO,KAAP,KAAiB,UAAjB,IAA+B,CAAC,WAAW,CAAC,qBAAhD,EAAuE;AACrE,YAAI,CAAC,SAAD,IAAc,OAAO,KAAK,CAAC,SAAb,KAA2B,WAA7C,EAA0D;AACxD,UAAA,OAAO,CAAC,IAAR,CAAa,iIAAb;AACA,UAAA,SAAS,GAAG,IAAZ,CAFwD,CAEvC;AAClB;;AACO,YAAA,wBAAA,GAAA,kCAAA,CAAA,WAAA,EAAA,WAAA,CAAA,cAAA,CAAA,CAAA,wBAAA;AACR,YAAI,QAAQ,GAAG,wBAAwB,GAAG,KAAK,CAAC,IAAN,CAAW,wBAAX,CAAH,GAA0C,KAAjF;AACA,YAAM,SAAS,GAAG,SAAS,CAAC,SAAV,CAAoB,CAApB,EAAuB,SAAS,CAAC,MAAjC,EAAyC,WAAzC,EAAlB;AACA,YAAM,OAAO,GAAG,SAAhB;AACA,QAAA,EAAE,CAAC,gBAAH,CAAoB,SAApB,EAA+B,QAA/B,EAAyC,OAAzC,EATqE,CAUrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAA,WAAW,CAAC,KAAZ,CAAkB,SAAlB,IAA+B,SAA/B,CAnBqE,CAmB5B;;AACzC,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD,KAzByE;AA0B1E,IAAA,iBAAiB,EAAA,2BAAC,MAAD,EAAO;AACd,UAAA,KAAA,GAAA,MAAA,CAAA,KAAA;AAAA,UAAO,MAAA,GAAA,MAAA,CAAA,MAAP;AAAA,UAAe,WAAA,GAAA,MAAA,CAAA,WAAf;;AACF,UAAA,EAAA,GAAA,kCAAA,CAAA,WAAA,EAAA,WAAA,CAAA,cAAA,CAAA;AAAA,UAAE,wBAAA,GAAA,EAAA,CAAA,wBAAF;AAAA,UAA4B,oBAAA,GAAA,EAAA,CAAA,oBAA5B;;AAIN,UAAI,wBAAwB,IAAI,0BAA0B,CAAC,KAAD,CAA1D,EAAmE;AACjE,QAAA,KAAK,CAAC,6BAAN,GAAsC,KAAK,CAAC,qBAA5C;AACA,QAAA,KAAK,CAAC,qBAAN,GAA8B,oBAAoB,IAAI,KAAK,CAAC,qBAA5D;AACD;;AACA,MAAA,KAAyB,CAAC,MAA1B,CAAgC,QAAA,CAAA,EAAA,EAAM,MAAN,EAAiB,WAAjB,EAA4B;AAAE,QAAA,MAAM,EAAA;AAAR,OAA5B,CAAhC;AACD,aAAO,IAAP;AACD,KAtCyE;AAuC1E,IAAA,iBAAiB,EAAA,2BAAC,EAAD,EAAiF;UAA9E,EAAA,GAAA,EAAA,CAAA;UAAI,WAAA,GAAA,EAAA,CAAA;AACtB,UAAM,yBAAyB,GAC7B,WAAW,CAAC,6BAAZ,IAA6C,WAAW,CAAC,qBAAzD,IAAkF,eAAe,CAAC,qBADpG;;AAEA,UAAI,yBAAyB,IAAI,yBAAyB,CAAC,cAA3D,EAA2E;AACzE,QAAA,yBAAyB,CAAC,cAA1B,CAAyC,EAAzC;AACD;;AACD,MAAA,WAAW,CAAC,qBAAZ,GAAoC,SAApC,CANgG,CAMlD;;AAC9C,MAAA,WAAW,CAAC,6BAAZ,GAA4C,SAA5C,CAPgG,CAO1C;;AACtD,aAAO,IAAP;AACD;AAhDyE,GAA5E;AAmDA,SAAO,WAAP;;AAEA,WAAS,kCAAT,CAA4C,WAA5C,EAAoF,cAApF,EAAuG;AACrG,QAAM,oBAAoB,GAAI,WAAW,CAAC,aAAZ,IAA6B,WAAW,CAAC,qBAA1C,IAAoE,eAAe,CAAC,qBAAjH;AACA,WAAO;AAAE,MAAA,wBAAwB,EAAE,oBAAoB,IAAI,cAApD;AAAoE,MAAA,oBAAoB,EAAA;AAAxF,KAAP;AACD;AACF;;AAEY,OAAA,CAAA,kBAAA,GAAkB,QAAA,CAAA,EAAA,EAC1B,eAAA,CAAA,yBAD0B,EACD;AAE5B,EAAA,kBAAkB,EAAE,UAFQ;AAI5B,EAAA,IAAI,EAAE,eAAA,CAAA,eAJsB;AAM5B,EAAA,YAAY,EAAE,eAAA,CAAA,gBANc;AAQ5B,EAAA,wBAAwB,EAAE,IARE;AAU5B,EAAA,gBAAgB,EAAA,0BAAC,EAAD,EAGf;QAHkB,WAAA,GAAA,EAAA,CAAA;QAAa,oBAAA,GAAA,EAAA,CAAA;;AAI9B,QAAI,oBAAJ,EAA0B;AACxB,MAAA,WAAW,CAAC,qBAAZ,GAAoC,oBAApC;AACD;AACF;AAjB2B,CADC,CAAlB;AAqBb,IAAM,MAAM,GAAiB;AAC3B,EAAA,aAAa,EAAE,gBAAA,CAAA,mBAAA,CAA6D,OAAA,CAAA,kBAA7D,CADY;AAG3B,EAAA,MAAM,EAAA,gBAAC,EAAD,EAAK,MAAL,EAA+C;AAA1C,QAAA,MAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,MAAA,GAAA,EAAA;AAA0C;;AACnD,QAAM,WAAW,GAA8B,EAA/C;AACA,WAAO,WAAW,CAAC,MAAZ,CAAkB,QAAA,CAAA,EAAA,EAAM,MAAN,EAAiB,gBAAgB,CAAC,WAAD,EAAc;AAAE,MAAA,cAAc,EAAE,MAAM,CAAC,cAAP,IAAyB;AAA3C,KAAd,CAAjC,CAAlB,CAAP;AACD;AAN0B,CAA7B;AAWa,OAAA,CAAA,QAAA,GAAyB,MAAzB;;AAEb,SAAS,0BAAT,CAAoC,CAApC,EAA0C;AACxC,SAAO,gBAAA,CAAA,aAAA,CAAc,CAAd,CAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtJD,IAAA,EAAA,GAAA,OAAA,CAAA,IAAA,CAAA;;AAEA,IAAA,iBAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA+D,EAAA,SAAA,CAAA,iBAAA,EAAA,MAAA,CAAA;;AAG7D,WAAA,iBAAA,CAAY,CAAZ,EAAgB;AAAhB,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,CAAN,KAAQ,IADV;;AAFA,IAAA,KAAA,CAAA,KAAA,GAAU,EAAV;AAMU,IAAA,KAAA,CAAA,WAAA,GAA2B,SAA3B;AAFR,IAAA,KAAI,CAAC,KAAL,GAAY,EAAZ;;AACD;AAGD;;;AACA,EAAA,iBAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,EAAf,EAA8B;AAC5B,SAAK,WAAL,GAAmB,EAAnB;AACD,GAFD;AAIA;;;;AAEA,EAAA,iBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAW,CAAX,EAAwB;AACtB;AACA,SAAK,KAAL,GAAU,QAAA,CAAA,EAAA,EAAQ,KAAK,KAAb,EAAuB,CAAvB,CAAV;AACD,GAHD;;AAIF,SAAA,iBAAA;AApBA,CAAA,CAA+D,EAAA,CAAA,YAA/D,CAAA;;AAAsB,OAAA,CAAA,iBAAA,GAAA,iBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFtB,IAAA,EAAA,GAAA,OAAA,CAAA,IAAA,CAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;AACA;;;;;AAGA,IAAA,6BAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAoF,EAAA,SAAA,CAAA,6BAAA,EAAA,MAAA,CAAA;;AAApF,WAAA,6BAAA,GAAA;;AAiCC;AAhCC;;;;AAEA,EAAA,6BAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,CAAT,EAAsB;AACpB,IAAA,MAAA,CAAA,SAAA,CAAM,QAAN,CAAc,IAAd,CAAc,IAAd,EAAe,CAAf;;AACA,QAAI,UAAJ;AACA,QAAI,SAAS,GAIT;AAAE,MAAA,KAAK,EAAE,CAAT;AAAY,MAAA,GAAG,EAAE;AAAjB,KAJJ;;AAKA,QAAI,QAAQ,CAAC,aAAb,EAA4B;AAC1B,MAAA,UAAU,GAAG,iBAAiB,CAAC,QAAQ,CAAC,aAAV,CAA9B;AACA,MAAA,SAAS,GAAG;AACV,QAAA,KAAK,EAAG,QAAQ,CAAC,aAAT,CAA4C,cAA5C,IAA8D,CAD5D;AAEV,QAAA,GAAG,EAAG,QAAQ,CAAC,aAAT,CAA4C,YAA5C,IAA4D,CAFxD;AAGV,QAAA,SAAS,EAAG,QAAQ,CAAC,aAAT,CAA4C,kBAA5C,IAAkE;AAHpE,OAAZ;AAKD;;AACD,QAAM,GAAG,GAAG,KAAK,MAAL,EAAZ;;AACA,QAAM,EAAE,GAAG,EAAA,CAAA,QAAA,CAAS,MAAT,CAAgB,GAAhB,EAAqB;AAAE,MAAA,cAAc,EAAE;AAAlB,KAArB,CAAX;;AACA,SAAK,WAAL,CAAiB,aAAjB,CAAgC,YAAhC,CAA6C,EAA7C,EAAiD,KAAK,WAAtD;AACA,SAAK,WAAL,GAAmB,EAAnB;;AACA,QAAI,UAAJ,EAAgB;AACd,UAAM,QAAQ,GAAG,iBAAiB,CAAC,UAAU,GAAG,EAAd,CAAlC;;AACA,UAAI,QAAQ,IAAI,SAAhB,EAA2B;AACzB,QAAA,QAAQ,CAAC,KAAT;;AACA,YAAI,QAAQ,CAAC,iBAAb,EAAgC;AAC9B,UAAA,QAAQ,CAAC,iBAAT,CAA2B,SAAS,CAAC,KAArC,EAA4C,SAAS,CAAC,GAAtD,EAA2D,SAAS,CAAC,SAArE;AACD;AACF;AACF;AACF,GA7BD;;AA8BF,SAAA,6BAAA;AAjCA,CAAA,CAAoF,mBAAA,CAAA,iBAApF,CAAA;;AAAsB,OAAA,CAAA,6BAAA,GAAA,6BAAA,EAkCtB;;AACA,SAAS,iBAAT,CAA2B,EAA3B,EAA+C;AAC7C,MAAI,OAAO,EAAP,IAAa,QAAjB,EAA2B;AACzB,WAAO,QAAQ,CAAC,QAAT,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,IAAhC,EAAsC,CAAtC,EAAyC,IAAzC,IAAiD,EAAxD;AACD;;AACD,MAAI,CAAC,EAAD,IAAO,EAAE,CAAC,QAAH,IAAe,CAA1B,EAA6B;AAC3B,WAAO,EAAP;AACD;;AACD,MAAI,EAAE,CAAC,EAAP,EACE,OAAO,cAAc,EAAE,CAAC,EAAjB,GAAsB,IAA7B;;AACF,MAAI,EAAE,CAAC,UAAP,EAAmB;AACjB,QAAM,KAAK,GAAG,KAAK,CAAC,IAAN,CAAW,EAAE,CAAC,UAAH,CAAc,QAAzB,EAAmC,MAAnC,CAA0C,UAAA,CAAA,EAAC;AAAI,aAAA,CAAC,CAAC,OAAF,IAAa,EAAE,CAAC,OAAhB;AAAuB,KAAtE,CAAd;AACA,WAAQ,iBAAiB,CAAC,EAAE,CAAC,UAAJ,CAAjB,GACN,GADM,GAEN,CAAC,EAAE,CAAC,OAAH,IAAc,EAAf,EAAmB,WAAnB,EAFM,IAGL,KAAK,CAAC,MAAN,GAAe,CAAf,GAAmB,OAAO,KAAK,CAAC,OAAN,CAAc,EAAd,IAAoB,CAA3B,IAAgC,GAAnD,GAAyD,EAHpD,CAAR;AAID,GAND,MAOK;AACH,WAAO,SAAP;AACD;AACF,EACD;;;AACA,SAAS,iBAAT,CAA2B,IAA3B,EAAyC,SAAzC,EAAyE;AACvE,MAAM,CAAC,GAAG,QAAQ,CAAC,QAAT,CAAkB,IAAlB,EAAwB,QAAxB,EAAkC,IAAlC,EAAwC,CAAxC,EAA2C,IAA3C,CAAV;;AACA,MAAI,CAAC,SAAL,EAAgB;AACd,WAAO,CAAC,CAAC,WAAF,EAAP;AACD;;AACD,MAAI;AACF,QAAI,CAAC,GAAA,KAAA,CAAL;AACA,QAAI,EAAE,GAAA,KAAA,CAAN;;AACA,WAAO,CAAC,CAAC,GAAG,CAAC,CAAC,WAAF,EAAL,KAAyB,CAAC,SAAS,CAAC,CAAD,CAA1C,EAA+C;AAC7C,MAAA,EAAE,GAAG,CAAL;AACD;;AACD,WAAO,EAAP;AACD,GAPD,CAQA,OAAO,CAAP,EAAU;AACR,IAAA,KAAK,CAAC,oDAAoD,CAArD,CAAL;AACD;AACF;;;;;;;;;;;;AC7ED,QAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AACA,QAAA,CAAA,OAAA,CAAA,qBAAA,CAAA,CAAA;;AACA,QAAA,CAAA,OAAA,CAAA,iCAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA,IAAA,GAAA,GAAA,OAAA,CAAA,IAAA,CAAA;;AACA,IAAA,+BAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AAEA,SAAgB,iCAAhB,GAAiD;AAC/C,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;AACA,EAAA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,MAA1B;;AACA,MAAM,EAAE,GAAG,GAAA,CAAA,QAAA,CAAS,MAAT,CAAgB,GAAA,CAAA,QAAA,CAAA,aAAA,CAAC,GAAD,EAAI;AAAC,IAAA,MAAM,EAAE,CAAC;AAAE,MAAA,IAAI,EAAE;AAAR,KAAD,EAAmB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAnB;AAAT,GAAJ,CAAhB,EAAsE;AAAE,IAAA,MAAM,EAAA,MAAR;AAAW,IAAA,cAAc,EAAE;AAA3B,GAAtE,CAAX;;AACA,EAAA,MAAM,CAAC,WAAP,CAAmB,EAAnB;AACA,SAAO,MAAP;AACD;;AAND,OAAA,CAAA,iCAAA,GAAA,iCAAA;;AAWA,IAAA,QAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAuB,EAAA,SAAA,CAAA,QAAA,EAAA,MAAA,CAAA;;AACrB,WAAA,QAAA,CAAY,CAAZ,EAAwB;AAAxB,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,CAAN,KAAQ,IADV;;AAEE,IAAA,KAAI,CAAC,KAAL,GAAU,QAAA,CAAA,EAAA,EAAQ,CAAR,CAAV;;AACD;;AACD,EAAA,QAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,WACE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,oBAAA,EAEE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACE,MAAA,KAAK,EAAE,KAAK,KAAL,CAAW,KADpB;AAEE,MAAA,OAAO,EAAE,iBAAA,CAAA,EAAC;AACR,QAAA,KAAI,CAAC,QAAL,CAAc;AAAE,UAAA,KAAK,EAAE,CAAC,CAAC,aAAF,CAAgB;AAAzB,SAAd;AACD;AAJH,KAAA,CAFF,EAQE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,IAAA,EAAA,IAAA,CARF,sBAAA,EASoB,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EAAO,KAAK,KAAL,CAAW,KAAlB,CATpB,EASoD,GATpD,CADF;AAaD,GAdD;;AAeF,SAAA,QAAA;AApBA,CAAA,CAAuB,+BAAA,CAAA,6BAAvB,CAAA;;AA4BA,IAAA,GAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAkB,EAAA,SAAA,CAAA,GAAA,EAAA,MAAA,CAAA;;AAChB,WAAA,GAAA,CAAY,CAAZ,EAAgB;AAAhB,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,CAAN,KAAQ,IADV;;AAEE,IAAA,KAAI,CAAC,KAAL,GAAU,QAAA,CAAA,EAAA,EAAQ,CAAR,CAAV;;AACD;;AACD,EAAA,GAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,WACE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC;AAAf,KAAA,EACE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQ,MAAA,EAAE,EAAC,KAAX;AAAiB,MAAA,OAAO,EAAE,iBAAA,CAAA,EAAC;AAAI,eAAA,KAAI,CAAC,QAAL,CAAc;AAAE,UAAA,MAAM,EAAM,KAAI,CAAC,KAAL,CAAW,MAAX,CAAiB,MAAjB,CAAiB,CAAE;AAAE,YAAA,IAAI,EAAE,iBAAiB,IAAI,CAAC,MAAL;AAAzB,WAAF,CAAjB;AAAd,SAAd,CAAA;AAA2F;AAA1H,KAAA,EAA0H,KAA1H,CADF,EAIE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,IAAA,EAAA,IAAA,EACG,KAAK,KAAL,CAAW,MAAX,CAAkB,GAAlB,CAAsB,UAAA,CAAA,EAAC;AAAI,aAC1B,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAA,mBAAa,CAAC,CAAC;AAAf,OAAA,EACE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAC,QAAD,EAAS;AAAC,QAAA,KAAK,EAAE,CAAC,CAAC;AAAV,OAAT,CADF,EAEE,GAAA,CAAA,QAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE,QAAA,SAAS,EAAC,QADZ;AAEE,QAAA,OAAO,EAAE,iBAAA,CAAA,EAAC;AACR,UAAA,KAAI,CAAC,QAAL,CAAc;AAAE,YAAA,MAAM,EAAE,KAAI,CAAC,KAAL,CAAW,MAAX,CAAkB,MAAlB,CAAyB,UAAA,EAAA,EAAE;AAAI,qBAAA,EAAE,CAAC,IAAH,KAAY,CAAC,CAAC,IAAd;AAAkB,aAAjD;AAAV,WAAd;AACD;AAJH,OAAA,EAIG,QAJH,CAFF,CAD0B;AAW3B,KAXA,CADH,CAJF,CADF;AAqBD,GAtBD;;AAuBA,EAAA,GAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,CAAT,EAAsB;AACpB,SAAK,KAAL,GAAU,QAAA,CAAA,EAAA,EAAQ,KAAK,KAAb,EAAuB,CAAvB,CAAV;AACA,SAAK,WAAL,CAAiB,SAAjB,GAA6B,EAA7B;AACA,SAAK,WAAL,CAAiB,WAAjB,CAA6B,GAAA,CAAA,QAAA,CAAS,MAAT,CAAgB,KAAK,MAAL,EAAhB,CAA7B;AACD,GAJD;;AAKF,SAAA,GAAA;AAjCA,CAAA,CAAkB,+BAAA,CAAA,6BAAlB,CAAA;;;;;;AC1CA,IAAA,mCAAA,GAAA,OAAA,CAAA,qCAAA,CAAA;;AACA,mCAAA,CAAA,iCAAA","file":"statefulElementClassTestMain.7e0bb39d.map","sourceRoot":"../../../jsx-alone-dom-extra/src/__tests__","sourcesContent":["import { JSXAloneComponent, NodeLike, ElementLike, TextNodeLike, RenderConfig } from '.'\r\nexport function isJSXAloneComponent(c: any): c is JSXAloneComponent {\r\n  return c.prototype && c.prototype.render\r\n}\r\n\r\nexport function isNode<T>(n: any): n is NodeLike<T> {\r\n  return isTextNodeLike(n) || isElementLike(n)\r\n}\r\n\r\nexport function isElementLike<T>(n: any): n is ElementLike<T> {\r\n  return n && n.setAttribute\r\n}\r\n\r\nexport function isTextNodeLike<T>(n: any): n is TextNodeLike<T> {\r\n  return n && n.content && !isElementLike(n)\r\n}\r\n\r\n\r\nexport abstract class AbstractTextNodeLike<T> implements TextNodeLike<T> {\r\n  constructor(public content: string) {}\r\n  abstract render(config?: RenderConfig<T>): T\r\n}\r\nexport abstract class AbstractElementLike<T> implements ElementLike<T> {\r\n  attrs: {\r\n    [name: string]: any\r\n  }\r\n  children: NodeLike<T>[]\r\n  parentElement?: ElementLike<T>\r\n  \r\n  constructor(public tag: string) {\r\n    this.attrs = {}\r\n    this.children = []\r\n  }\r\n\r\n  abstract render(config?: RenderConfig<T>): T\r\n\r\n  setAttribute(name: string, value: string): void {\r\n    this.attrs[name] = value\r\n  }\r\n\r\n  appendChild(c: NodeLike<T>): void {\r\n    this.children.push(c)\r\n    if (isElementLike<T>(c)) {\r\n      c.parentElement = this\r\n    }\r\n  }\r\n  \r\n  abstract dangerouslySetInnerHTML(s: string): void\r\n\r\n    // abstract destroy():void\r\n  // findDescendant(p: Predicate<T>): ElementLike<T> | undefined {\r\n  //   let found: ElementLike<T> | undefined\r\n  //   this.children.some(c => {\r\n  //     if (isElementLike<T>(c)) {\r\n  //       if (p(c)) {\r\n  //         found = c\r\n  //       }\r\n  //       else {\r\n  //         found = c.findDescendant(p)\r\n  //       }\r\n  //     }\r\n  //     return !!found\r\n  //   })\r\n  //   return found\r\n  // }\r\n\r\n  // findAscendant(p: Predicate<T>): ElementLike<T> | undefined {\r\n  //   if (this.parentElement) {\r\n  //     if (p(this.parentElement)) {\r\n  //       return this.parentElement\r\n  //     }\r\n  //     return this.parentElement.findAscendant(p)\r\n  //   }\r\n  // }\r\n\r\n  // getAscendants(): ElementLike<T>[]  {\r\n  //   return this.parentElement ? [...this.parentElement.getAscendants(), this.parentElement] : []\r\n  // }\r\n\r\n  // getRootAscendant(): ElementLike<T> {\r\n  //   const r =  this.parentElement ? this.findAscendant(n=>isElementLike(n) && !n.parentElement) : this\r\n  //   return checkThrow(r, 'No root ascendant found in element like tree!')\r\n  // }\r\n\r\n  // getSiblings(): NodeLike<T>[]{\r\n  //   if(this.parentElement){\r\n  //     return this.parentElement.children.filter(c=>c!==this)\r\n  //   }\r\n  //   return []\r\n  // }\r\n\r\n  // findSibling(p: Predicate<T>): NodeLike<T> | undefined {\r\n  //   return this.getSiblings().find(p)\r\n  // }\r\n\r\n  // find(p: Predicate<T>): NodeLike<T>|undefined {\r\n  //   // TODO: this should start searching in the near children, sibling and parents, and only after that look on far nodes\r\n  //   return this.getRootAscendant().findDescendant(p)\r\n  // }\r\n  \r\n}\r\n","import { NodeLike, ElementLike } from './types';\r\nimport { isElementLike } from './elementImpl';\r\nimport { ReactNode } from './declarations/domElementDeclarations';\r\n\r\nexport type ElementClassProps<P> = ( Readonly<{ children?: ReactNode}>&Readonly<P> )\r\n\r\nexport interface IElementClass<P={}> {\r\n  props: ElementClassProps<P>\r\n  render(): JSX.Element\r\n}\r\n\r\n/**\r\n * A Class able to render() JSX. Similar to React.Component but only supporting properties, without state, context, ref, did/will methods, etc.\r\n */\r\nexport abstract class ElementClass<T, P={}> implements IElementClass<P> {\r\n\r\n  constructor(public readonly props: ElementClassProps<P>) {\r\n  }\r\n\r\n  abstract render(): JSX.Element\r\n\r\n  protected childrenAsArray(): NodeLike<P>[] {\r\n    return (Array.isArray(this.props.children) ? this.props.children : [this.props.children]) as NodeLike<P>[];\r\n  }\r\n\r\n  protected childrenElementsAsArray(): ElementLike<P>[] {\r\n    return this.childrenAsArray().filter(c => isElementLike<P>(c)) as ElementLike<P>[]\r\n  }\r\n\r\n  protected firstChildElement(): ElementLike<P> | undefined {\r\n    return this.childrenAsArray().find(e => true) as ElementLike<P> | undefined\r\n  }\r\n}\r\nexport abstract class AbstractElementClass<P={}> extends ElementClass<any, P>{}\r\n","import { AbstractElementLike, isJSXAloneComponent as isClassElementClass, isNode } from './elementImpl'\nimport { CreateCreateElementConfig, JSXAlone, JSXAloneAttrs, JSXAloneComponent, JSXAloneTag, ElementLike } from './types'\n\nconst throwOnUnrecognized = false\n\nexport function debug(err: string) {\n  if (throwOnUnrecognized) {\n    throw err\n  } else {\n    console.error(err)\n  }\n}\n\nexport function createCreateElement<T, R extends ElementLike<T>=ElementLike<T>>(config: CreateCreateElementConfig<T, R>) {\n  const { impl, textNodeImpl, escapeAttributes, functionAttributes, onElementReady, onElementCreated: onElementCreate } = config\n\n  const createElement: CreateElementFunction<T,R> = function(tag, attrs = {}, ...children: any[]) {\n    let element:  R\n    let elementClassInstance: JSXAloneComponent | undefined\n    if (typeof tag === 'string') {\n      element = new impl(tag)\n    } else {\n      if (isClassElementClass(tag)) {\n        elementClassInstance = new tag({ ...attrs, children: children })\n        element = elementClassInstance.render()\n      } else {\n        if (typeof tag.prototype !== undefined && config.evaluateFunctionsWithNew) {\n          element = new (tag as any)({ ...attrs, children: children })\n        } else {\n          element = tag({ ...attrs, children: children })\n        }\n      }\n      attrs = {}\n    }\n    if (onElementCreate) {\n      onElementCreate({ elementLike: element, elementClassInstance })\n    }\n    for (let name in attrs) {\n      if (name && attrs.hasOwnProperty(name)) {\n        let value: any = attrs[name]\n        if (typeof value === 'boolean') {\n          if (value === true) {\n            element.setAttribute(name, name)\n          }\n        } else if (typeof value === 'function') {\n          if (!functionAttributes || functionAttributes === 'preserve') {\n            element.setAttribute(name, value)\n          } else {\n            const code =\n              functionAttributes === 'toString-this'\n                ? `_this = __this__ = this; (${value.toString()}).apply(_this, arguments)`\n                : value.toString()\n            element.setAttribute(name,  escapeAttributes ? escapeAttributes(code) : code)\n          }\n        } else if (value !== false && value != null) {\n          if (name === 'className') {\n            if (typeof value === 'string') {\n              element.setAttribute('class', value)\n            } else if (Array.isArray(value) && value.length && typeof value[0] === 'string') {\n              element.setAttribute('class', value.join(' '))\n            } else {\n              debug(`unrecognized className value ${typeof value} ${value}`)\n            }\n          } else {\n            element.setAttribute(name, value.toString())\n          }\n        } else if (typeof value === 'object') {\n          if (name === 'style') {\n            element.setAttribute(\n              'style',\n              `${Object.keys(value)\n                .map(p => `${p}: ${value[p]}`)\n                .join('; ')}`\n            )\n          } else if (name === 'dangerouslySetInnerHTML' && value && typeof value.__html === 'string') {\n            element.dangerouslySetInnerHTML(value.__html)\n          } else {\n            debug(`unrecognized object attribute \"${name}\" - the only object attribute supported is \"style\"`)\n          }\n        } else {\n          debug(`unrecognized attribute \"${name}\" with type ${typeof value}`)\n        }\n      }\n    }\n    if (typeof tag === 'string') {\n      // don't render children for function or classes since they are responsible of render their own children\n      children\n        .filter(c => c)\n        .forEach(child => {\n          if (isNode<T>(child)) {\n            element.appendChild(child)\n          } else if (Array.isArray(child)) {\n            child.forEach(c => {\n              if (typeof c === 'string') {\n                element.appendChild(new textNodeImpl(c))\n              } else if (isNode<T>(c)) {\n                element.appendChild(c)\n              } else {\n                debug(`Child is not a node or string: ${c} , tag: ${tag}`)\n              }\n            })\n          } else {\n            element.appendChild(new textNodeImpl(child))\n          }\n        })\n    }\n    if (onElementReady) {\n      onElementReady({ elementLike: element })\n    }\n    return element\n  }\n  return createElement\n}\n\nexport const AbstractJSXAlone: JSXAlone<any> = null as any\n\nexport type CreateElementFunction<T, R=AbstractElementLike<T>> = (\n  tag: JSXAloneTag,\n  attrs?: JSXAloneAttrs<string> | undefined,\n  ...children: any[]\n) => R\n","// import { AbstractJSXAlone as  } from './createElement';\nimport { ReactNode, AbstractJSXAlone as JSXAlone } from '.';\n\n\nexport type Children = ReactNode\n\n// export type Props = { children: Children }\n\n// TODO: like React.Fragment\nexport const Fragment = (props: { children: Children })=><span>{props.children}</span>\n\nexport function Js(props: {children: (...args: any[]) => any }) {\n  const r = props.children()\n  console.log(r);\n  return r ? <Fragment>{r}</Fragment> : null\n}\n\n\n/** if as statement. children need to be in a function and the function accepts a parameter which value is given condition `c` but casted to NotFalsy<C> so there's no need of type guards in the body. Example:\n```\n<If c={type}>{type =>\n  <select multiple={true}>{names[type].map(c =>\n      <option value={c.id}>{c.label}</option>)}\n  </select>\n</If>\n```\n\nNo error thrown on second line because parameter type is not falsy but keep the original type (excluding falsy values)\n\nOther example:\n\n```\nexport class ErrorComponent extends React.Component<ErrorOptions> {\n  public render() {\n    return <div>\n      <If c={this.props.error}>{error =>\n        <React.Fragment>\n          <h2>Error</h2>\n          <If c={typeof error === 'string'}>{e =>\n            <h3>{e}</h3>}\n          </If>\n          <If c={typeof error === 'object'}>{e =>\n            <React.Fragment>\n              <h5>{error!.name}</h5>\n              <p>{error!.message}</p>\n              <If c={error.stack}>{e =>\n                <ul>\n                  {e.split('\\n').map(e =>\n                    <li>{e}</li>)}\n                </ul>}\n              </If>\n            </React.Fragment>}\n          </If>\n          <If c={this.props.responseText}>{responseText =>\n            <iframe css={{ border: 0, width: '100%', height: '400px' }} srcDoc={responseText}>\n            </iframe>}\n          </If>\n        </React.Fragment>}\n      </If>\n    </div>\n  }\n}\n\n```\n*/\nexport function If<T extends any = any\n>(props: { c: any, p?: T, children: (...args: NotFalsy<T>[]) => JSX.Element }) {\n//TODO: issue in dom implementation, children is an array \nconst f = Array.isArray(props.children) ? props.children[0] : props.children\n  const { c, p } = props\n  if (isNotFalsy(c))\n    return f.apply(null, [...(p ? [p] : []), c ])\n  else {\n    return null\n  }\n}\ntype NotFalsy<C=any> = Exclude<C, Falsy>\ntype Falsy = null | '' | undefined | false\nfunction isNotFalsy<T>(a: T): a is NotFalsy<T> { return !!a }\n\n","\nexport function checkThrow<T>(r?: T, msg = 'Throwing on undefined value'): T {\n  if (!r) { throw new Error(msg) }\n  return r\n}\n// export function tryTo<F extends (...args: any[]) => any>(f: F): ReturnType<F> | undefined {\n//   try {\n//     return f()\n//   } catch (error) {\n//   }\n// }\nexport function array<T = number>(n: number, sample?: T): T[] {\n  const a: (T | number)[] = [];\n  for (let i = 0; i < n; i++) {\n    a.push(typeof sample === 'undefined' ? i : sample);\n  }\n  return a as T[];\n}\nexport function repeat(n: number, s: string): string {\n  return array(n, s).join('')\n}\nexport function indent(i: number = 1, tabSize = 2): string {\n  return repeat(i * tabSize, ' ')\n}\n\nexport function getPosition(string: string, subString: string, index: number) {\n  return string.split(subString, index).join(subString).length;\n}\n\nexport function removeWhites(s: string, replaceWith=' '){\n  return s.replace(/\\s+/gm, replaceWith).trim()\n}\nexport function randomIntBetween(a: number, b: number){\n  return Math.floor(Math.random() * b) + a\n}\n\nexport function randomItem<T>(array: T[]): T{\n  return array[randomIntBetween(0, array.length)]\n}\n\n\nexport function printMs(ms: number, config: {\n  minutes?: boolean;\n  seconds?: boolean;\n  ms?: boolean;\n} = { minutes: false, seconds: true, ms: true }) {\n  config = { ...{ minutes: false, seconds: true, ms: true }, ...config };\n  const seconds = config.seconds && Math.floor(ms / 1000);\n  const minutes = config.minutes && seconds && Math.floor(seconds / 60);\n  const milliseconds = config.ms && Math.floor(ms % 1000 || ms);\n  return `${minutes ? `${minutes} minutes ` : ''}${seconds ? `${seconds} seconds ` : ''}${milliseconds ? `${milliseconds} ms ` : ''}`;\n}\n","export * from './types'\n\nexport * from './elementImpl'\n\nexport * from './declarations/domElementDeclarations'\nexport * from './declarations/cssDeclarations'\nexport * from './elementClass'\nexport * from './createElement'\n\nexport {AbstractTextNodeLike, AbstractElementLike} from './elementImpl'\nexport * from './misc'\nexport * from './util'","import { createCreateElement, isElementLike, JSXAloneComponent, CreateElementFunction } from 'jsx-alone-core'\r\nimport {\r\n  createCreateElementConfig,\r\n  CreateCreateElementDomConfig,\r\n  ElementClass,\r\n  ElementLikeImpl,\r\n  ElementLikeImplRenderConfig,\r\n  TextNodeLikeImpl,\r\n  RenderOutput\r\n} from 'jsx-alone-dom'\r\n\r\ntype RenderFunction = (el: JSX.Element, config?: FunctionAttributeRenderConfig) => RenderOutput\r\ntype JSXAloneType = { render: RenderFunction; createElement: CreateElementFunction<RenderOutput, FunctionAttributesElement> }\r\n\r\nexport interface FunctionAttributesElement extends ElementLikeImpl {\r\n  _elementClassInstance?: ElementClass | undefined\r\n  _originalElementClassInstance?: ElementClass | undefined\r\n  // _eventListenerList?: EventEntry[]\r\n  // isRoot():boolean\r\n}\r\n\r\n// class FunctionAttributesElementImpl extends ElementLikeImpl implements FunctionAttributesElement {\r\n//   _elementClassInstance: ElementClass | undefined\r\n//   _originalElementClassInstance: ElementClass | undefined\r\n//   /** if it has a defined list then we consider this node a root node and it will be responsible of collecting data for un registering event listener of all its \"tree\" \r\n//    * TODO: in the future we could also use the root for event delegation.\r\n//   */\r\n//   // _eventListenerList?: EventEntry[]\r\n//   // destroy() {\r\n\r\n//   // }\r\n//   // isRoot(){\r\n//   //   return this._eventListenerList\r\n//   // }\r\n// }\r\n\r\n// type EventEntry<K extends keyof HTMLElementEventMap =  keyof HTMLElementEventMap> = {\r\n//   type: K, \r\n//   listener: (this: HTMLElement, ev: HTMLElementEventMap[K] ) => any, \r\n//   options?: boolean | EventListenerOptions\r\n// }\r\n\r\nexport interface CreateCreateElementDomConfig<R extends FunctionAttributesElement = FunctionAttributesElement> extends CreateCreateElementDomConfig<R> {\r\n  extraRenderConfig?: ElementLikeImplRenderConfig\r\n}\r\nlet warn1Once = false\r\nexport interface FunctionAttributeRenderConfig extends ElementLikeImplRenderConfig {\r\n  dontAddEventListeners?: boolean\r\n  initialContext?: any\r\n}\r\nfunction buildExtraConfig(\r\n  rootElementLike: FunctionAttributesElement,\r\n  extraConfig: FunctionAttributeRenderConfig\r\n): ElementLikeImplRenderConfig<FunctionAttributesElement> {\r\n\r\n  const configHooks: ElementLikeImplRenderConfig<FunctionAttributesElement> = {\r\n    handleAttribute({ value, el, attribute, elementLike }) {\r\n      if (typeof value === 'function' && !extraConfig.dontAddEventListeners) {\r\n        if (!warn1Once && typeof value.prototype !== 'undefined') {\r\n          console.warn('Warning, function attributes in a function are partially supported, `this` won\\'t be available.\\n Better use an arrow function!')\r\n          warn1Once = true // do this better with a helper\r\n        }\r\n        const { functionAttributeContext } = getFunctionAttributeContextObjects(elementLike, extraConfig.initialContext)\r\n        let listener = functionAttributeContext ? value.bind(functionAttributeContext) : value\r\n        const eventType = attribute.substring(2, attribute.length).toLowerCase() as keyof HTMLElementEventMap\r\n        const options = undefined\r\n        el.addEventListener(eventType, listener, options)\r\n        // if(!elementLike._eventListenerList){\r\n        //   elementLike._eventListenerList = []\r\n        //   // elementLike._destr\r\n        // }\r\n        // elementLike._eventListenerList.push({type: eventType, listener,options})\r\n        // if(!elementLike.){\r\n        // elementLike._eventListenerList = []\r\n        // }\r\n\r\n        elementLike.attrs[attribute] = undefined // forget the reference\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    handleChildRender(config) {\r\n      const { child, parent, elementLike } = config\r\n      const { functionAttributeContext, elementClassInstance } = getFunctionAttributeContextObjects(\r\n        elementLike as FunctionAttributesElement,\r\n        extraConfig.initialContext\r\n      )\r\n      if (functionAttributeContext && isFunctionAttributeElement(child)) {\r\n        child._originalElementClassInstance = child._elementClassInstance\r\n        child._elementClassInstance = elementClassInstance || child._elementClassInstance\r\n      }\r\n      (child as ElementLikeImpl).render({ ...config, ...configHooks, parent })\r\n      return true\r\n    },\r\n    handleAfterRender({ el, elementLike }: { el: HTMLElement; elementLike: FunctionAttributesElement }) {\r\n      const elementClassWithContainer =\r\n        elementLike._originalElementClassInstance || elementLike._elementClassInstance || rootElementLike._elementClassInstance\r\n      if (elementClassWithContainer && elementClassWithContainer.setContainerEl) {\r\n        elementClassWithContainer.setContainerEl(el)\r\n      }\r\n      elementLike._elementClassInstance = undefined // forget the reference\r\n      elementLike._originalElementClassInstance = undefined // forget the reference\r\n      return true\r\n    }\r\n  }\r\n\r\n  return configHooks\r\n\r\n  function getFunctionAttributeContextObjects(elementLike: FunctionAttributesElement, initialContext: any) {\r\n    const elementClassInstance = (elementLike.parentElement && elementLike._elementClassInstance) || rootElementLike._elementClassInstance\r\n    return { functionAttributeContext: elementClassInstance || initialContext, elementClassInstance }\r\n  }\r\n}\r\n\r\nexport const createCreateConfig: CreateCreateElementDomConfig<FunctionAttributesElement> = {\r\n  ...createCreateElementConfig,\r\n\r\n  functionAttributes: 'preserve',\r\n\r\n  impl: ElementLikeImpl as any as FunctionAttributesElement & { new(tag: string): FunctionAttributesElement },\r\n\r\n  textNodeImpl: TextNodeLikeImpl,\r\n\r\n  evaluateFunctionsWithNew: true,\r\n\r\n  onElementCreated({ elementLike, elementClassInstance }: {\r\n    elementLike: FunctionAttributesElement\r\n    elementClassInstance?: JSXAloneComponent\r\n  }) {\r\n    if (elementClassInstance) {\r\n      elementLike._elementClassInstance = elementClassInstance as any\r\n    }\r\n  }\r\n}\r\n\r\nconst Module: JSXAloneType = {\r\n  createElement: createCreateElement<RenderOutput, FunctionAttributesElement>(createCreateConfig),\r\n\r\n  render(el, config: FunctionAttributeRenderConfig = {}) {\r\n    const elementLike: FunctionAttributesElement = el as any\r\n    return elementLike.render({ ...config, ...buildExtraConfig(elementLike, { initialContext: config.initialContext || this }) })\r\n  }\r\n}\r\n\r\n\r\n\r\nexport const JSXAlone: JSXAloneType = Module\r\n\r\nfunction isFunctionAttributeElement(a: any): a is FunctionAttributesElement {\r\n  return isElementLike(a)\r\n}\r\n\r\nexport { ElementClass }\r\n","import { ElementClass } from './'\n\nexport abstract class StatefulComponent<P = {}, S ={}> extends ElementClass<P> {\n  state: S ={} as any\n\n  constructor(p: P) {\n    super(p)\n    this.state ={} as any\n  }\n  protected containerEl: HTMLElement = undefined as any\n\n  /** called by ElementLike.render() */\n  setContainerEl(el: HTMLElement) {\n    this.containerEl = el\n  }\n\n  /** changes the state, clean up containerEl and renders the element again and append it to containerEl. \n   * Notice that descendant elements will be destroyed and */\n  setState(  s: Partial<S>) {\n    //@ts-ignore\n    this.state = { ...this.state, ...s }  \n  }\n}\n\n \n","import { JSXAlone } from './';\nimport { StatefulComponent } from './StatefulComponent';\n/** implement stateful -ness by re-rendering it self agin and agin when the stat changes. Preserves focus.\n * TODO: parent re-render actually resets the children (ISSUE)\n */\nexport abstract class DestructiveDomRenderComponent<P = {}, S = Partial<P>> extends StatefulComponent<P, S> {\n  /** changes the state, clean up containerEl and renders the element again and append it to containerEl.\n   * Notice that descendant elements will be destroyed and */\n  setState(s: Partial<S>) {\n    super.setState(s);\n    let activePath: XPathResult | string | undefined;\n    let selection: {\n      start: number;\n      end: number;\n      direction?: string;\n    } = { start: 0, end: 0 };\n    if (document.activeElement) {\n      activePath = getXPathOfElement(document.activeElement);\n      selection = {\n        start: (document.activeElement as HTMLInputElement).selectionStart || 0,\n        end: (document.activeElement as HTMLInputElement).selectionEnd || 0,\n        direction: (document.activeElement as HTMLInputElement).selectionDirection || undefined\n      };\n    }\n    const jsx = this.render();\n    const el = JSXAlone.render(jsx, { initialContext: this });\n    this.containerEl.parentElement!.replaceChild(el, this.containerEl);\n    this.containerEl = el as HTMLElement;\n    if (activePath) {\n      const activeEl = getElementByXPath(activePath + '') as HTMLInputElement;\n      if (activeEl && selection) {\n        activeEl.focus();\n        if (activeEl.setSelectionRange) {\n          activeEl.setSelectionRange(selection.start, selection.end, selection.direction as any);\n        }\n      }\n    }\n  }\n}\n//  TODO: move to misc\nfunction getXPathOfElement(el: Element | string): string | undefined {\n  if (typeof el == 'string') {\n    return document.evaluate(el, document, null, 0, null) + '';\n  }\n  if (!el || el.nodeType != 1) {\n    return '';\n  }\n  if (el.id)\n    return \"//*[@id='\" + el.id + \"']\";\n  if (el.parentNode) {\n    const sames = Array.from(el.parentNode.children).filter(x => x.tagName == el.tagName);\n    return (getXPathOfElement(el.parentNode as Element) +\n      '/' +\n      (el.tagName || '').toLowerCase() +\n      (sames.length > 1 ? '[' + (sames.indexOf(el) + 1) + ']' : ''));\n  }\n  else {\n    return undefined;\n  }\n}\n//  TODO: move to misc\nfunction getElementByXPath(path: string, predicate?: (n: Node) => boolean): Node | undefined {\n  const p = document.evaluate(path, document, null, 0, null);\n  if (!predicate) {\n    return p.iterateNext();\n  }\n  try {\n    let n;\n    let n2;\n    while ((n = p.iterateNext()) && !predicate(n)) {\n      n2 = n;\n    }\n    return n2;\n  }\n  catch (e) {\n    alert('Error: Document tree modified during iteration ' + e);\n  }\n}\n","export * from './createElement'\nexport * from './StatefulComponent'\nexport * from './DestructiveDomRenderComponent'","import { JSXAlone, StatefulComponent } from '..'\nimport { DestructiveDomRenderComponent } from '../DestructiveDomRenderComponent';\n\nexport function statefulElementClassTestRenderApp(this: any) {\n  const parent = document.createElement('div')\n  document.body.appendChild(parent)\n  const el = JSXAlone.render(<App people={[{ name: 'seba' }, { name: 'lau' }]} />, { parent , initialContext: this  }) as HTMLElement\n  parent.appendChild(el)\n  return parent\n}\n\ninterface RepeaterP{\n  value: string\n}\nclass Repeater extends DestructiveDomRenderComponent<RepeaterP, RepeaterP> {\n  constructor(p: RepeaterP) {\n    super(p)\n    this.state = { ...p }\n  }\n  render() {\n    return (\n      <div className=\"Repeater\">\n        Write something:\n        <input\n          value={this.state.value}\n          onKeyUp={e => {\n            this.setState({ value: e.currentTarget.value })\n          }}\n        />\n        <br />\n        Will be repeated: <span>{this.state.value}</span>{' '}\n      </div>\n    )\n  }\n}\n\ninterface P {\n  people: {\n    name: string\n  }[]\n}\n\nclass App extends DestructiveDomRenderComponent<P, P> {\n  constructor(p: P) {\n    super(p)\n    this.state = { ...p }\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <button id=\"add\" onClick={e => this.setState({ people: [...this.state.people, { name: 'random name ' + Math.random() }] })}>\n          add\n        </button>\n        <ul>\n          {this.state.people.map(p => (\n            <li data-id={p.name}>\n              <Repeater value={p.name} />\n              <button\n                className=\"remove\"\n                onClick={e => {\n                  this.setState({ people: this.state.people.filter(p2 => p2.name !== p.name) })\n                }}>\n                remove\n              </button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    )\n  }\n  setState(s: Partial<P>) {\n    this.state = { ...this.state, ...s };\n    this.containerEl.innerHTML = '';\n    this.containerEl.appendChild(JSXAlone.render(this.render()));\n  }\n}","import { statefulElementClassTestRenderApp } from \"./statefulElementClassTestRenderApp\";\nstatefulElementClassTestRenderApp()"]}